<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>El fichero borrar.php</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="GNU/Linux, software libre para la comunidad universitaria"
HREF="index.html"><LINK
REL="UP"
TITLE="Principios de la Web"
HREF="c21.html"><LINK
REL="PREVIOUS"
TITLE="El fichero editar.php"
HREF="x125.html"><LINK
REL="NEXT"
TITLE="El fichero buscar.php"
HREF="x138.html"></HEAD
><BODY
CLASS="section"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>GNU/Linux, software libre para la comunidad universitaria: 
    Creación de páginas web dinámicas con PHP/MySQL
  </TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x125.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Capítulo 2. Principios de la Web</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x138.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="AEN132"
>2.7. El fichero borrar.php</A
></H1
><P
>A continuación se puede ver la estructura
      del fichero borrar.php:</P
><DIV
CLASS="informalexample"
><P
></P
><A
NAME="AEN135"
></A
><PRE
CLASS="programlisting"
>&#13;          &#60;?php 
          //incluimos el fichero config.php para coger los datos de la conexión
          include_once('../config.php');
          //cogemos las variables de las coneción para que se puedan utilizar en el script
          global $server, $database, $user, $passwd;
          //abrimos la conexión
          $conexion = mysql_connect($server,$user,$passwd);
          //elegimos la BBDD
          mysql_select_db ($database, $conexion) OR die ("No se puede conectar");
          //rellenamos la consulta, cambiar alumnos por el nombre de la tabla a listar
          $sql="Select * from alumnos WHERE id=".$_GET['id'].";";
          //re realiza la consulta
          $result=mysql_query($sql,$conexion);
          //print $sql;
          //se coge el registro del alumno
          $row= mysql_fetch_array($result);
          ?&#62;
          &#60;html&#62;
            &#60;head&#62;
              &#60;TITLE&#62;Borrar Asignatura&#60;/TITLE&#62;
              &#60;LINK REL="stylesheet" TYPE="text/css"
              HREF="../estilo.css" /&#62;
            &#60;/head&#62;
            &#60;body&#62;
              &#60;?php
              // se rellena la consulta que borra el alumno se substituye alumno por el nombre de la tabla 
              $sql="DELETE from `asignaturas` WHERE `id` =".$_GET['id']." LIMIT 1 ;";
              //echo $sql;
              // se ejecuta la consulta se borrado
              $result=mysql_query($sql,$conexion);
              // se informa de que se ha eliminado un alumno
              echo "&#60;p&#62;Asignatura eliminada&#60;/p&#62;";
              // se coloca el enlace que permite volver al listado
              echo "&#60;p&#62;&#60;A HREF='index.php'&#62;Volver&#60;/A&#62;&#60;/p&#62;";

              ?&#62;
            &#60;/body&#62;
          &#60;/html&#62;
        </PRE
><P
></P
></DIV
><P
>En la primera parte cogemos los datos del registro que
      queremos borrar, por si en algún momento
      quisiéramos mostrarlo. En la tercera parte
      borramos el registro en sí mismo, informamos al
      usuario del cambio y colocamos el botón
      Volver.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x125.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x138.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>El fichero editar.php</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c21.html"
ACCESSKEY="U"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>El fichero buscar.php</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>