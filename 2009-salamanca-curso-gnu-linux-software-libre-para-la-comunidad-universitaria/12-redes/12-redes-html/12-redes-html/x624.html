<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>NX. Nueva tecnolog칤a de escritorio remoto.</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="GNU/Linux, software libre para la comunidad universitaria"
HREF="index.html"><LINK
REL="UP"
TITLE="Escritorio remoto"
HREF="c562.html"><LINK
REL="PREVIOUS"
TITLE="RDP. Escritorio remoto de Windows"
HREF="x613.html"><LINK
REL="NEXT"
TITLE="Proxies, cortafuegos, software de filtrado"
HREF="c657.html"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>GNU/Linux, software libre para la comunidad universitaria: Redes privadas virtuales en GNU/Linux</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x613.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Cap狎ulo 7. Escritorio remoto</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="c657.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="AEN624"
>7.4. NX. Nueva tecnolog칤a de escritorio remoto.</A
></H1
><P
>NX ( http://en.wikipedia.org/wiki/NX_technology ) es una tecnolog칤a de escritorio remoto desarrollada por una empresa Italiana, NoMachine. NoMachine comercializa su implementaci칩n propietaria de esta tecnolog칤a. Los clientes son freeware y hay tambi칠n un servidor freeware, NX Free Edition, para GNU/Linux y Solaris, mientras que el servidor para Windows y MacOSX es de pago. NX Free Edition est치 limitado respecto a la versi칩n de pago: s칩lo permite dos sesiones por servidor</P
><P
>Lo m치s interesante es que Nomachine adem치s publica el c칩digo fuente necesario para implementar esta tecnlog칤a bajo licencia GPL (lamentablemente s칩lo bajo GPL2): http://www.nomachine.com/documents/technology/building-components-3.x.php. El lado negativo es que no hay ninguna implementaci칩n libre que venga con las grandes distribuciones actuales, por lo que esta tecnolog칤a a pesar de ser muy interesante, tiene una presencia marginal en GNU/Linux.</P
><P
>NX se implementa sobre X-Window para acelerarlo sensiblemente y eliminar round-trips. As칤, gracias al uso de cach칠 o el utilizar formatos tipo PNG en lugar de bitmaps se logran ratios de compresi칩n del orden de 10:1 a 100:1. Gracias a estas compresiones es utilizable un escritorio remoto incluso a trav칠s de un modem.</P
><P
>En una serie de art칤culos sobre NX publicados en Linux Journal, se muestra como el inicio de sesi칩n en KDE la primera vez supone transferencias de 4,1MB, pero gracias a NX y su cach칠 las siguientes veces se queda en tan solo 35Kb.</P
><P
>NX aplica a X-Window mejoras que ofrece RDP, como el poder desconectar la sesi칩n y conectarse desde otra m치quina con todo como estaba (lo logra haciendo que el servidor X se ejecute en la m치quina remota, mediante el agente nxagent, a la que se conecta el cliente NX) o el permitir transferencias de ficheros o utilizar por las aplicaciones remotas nuestra impresora o tarjeta de sonido local.</P
><P
>Desde la versi칩n 3.0, NX permite ejecutar aplicaciones en modo rootless, es decir, como aplicaciones normales en lugar de todas dentro de una ventana que actua de escritorio.</P
><P
>En realidad NX tambi칠n se puede utilizar sobre RDP o VNC para acelerar tambi칠n estos protocolos, pero los resultados que se obtienen son inferiores respecto a X-Window: como hemos comentado la tecnolog칤a de X-Window es superior a RDP, s칩lo que hab칤a problemas como los round-trips que en la pr치ctica lo hac칤an poco utilizable sobre redes no locales.</P
><P
>Una limitaci칩n de NX utlizado sobre X-Window frente a VNC, es que no es posible iniciar un servidor NX sobre un servidor X ya arrancado, si se quiere usar remotamente hay que arrancarlo v칤a NX desde el principio.</P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN634"
>7.4.1. C칩mo funciona NX</A
></H2
><P
>En la implementaci칩n gratuita aunque privativa de NoMachine, NX Free Edition for Linux, hay paquetes nxserver, nxnode y nxclient. El servidor necesita los tres, mientras que el cliente necesita nxnode y nxclient; la mayor칤a de los programas est치n dentro del paquete nxnode; el motivo por el que para un servidor hace falta nxclient es simplemente porque este paquete incluye tambi칠n las librer칤as de NX. Uno de los programas m치s importantes que incluye el paquete nxnode es precisamente el ejecutable nxnode, que un proxy que se ejecuta tanto en el lado local como en el remoto y que crea el t칰nel entre los dos lados. En el lado de la aplicaci칩n remota, nxnode ejecuta un agente que es el intermediario con la aplicaci칩n: para aplicaciones X-Window es nxagent, para RDP es nxdesktop y para VNC nxviewer. Nxagent funciona en la m치quina remota como un servidor X-Window local. En principio las aplicaciones podr칤an funcionar sin necesidad de nxagent, utilizando el t칰nel de nxnode al estilo de un t칰nel SSH, pero nxagent es lo que permite eliminar los round-trips</P
><P
>Un tema que desconcierta a un nuevo usuario de NX, es que el servidor nxserver no es un demonio que tenga que lanzar el usuario y permanezca en ejecuci칩n a la espera que se conecten clientes. En realidad nxserver es un programa presente en la m치quina de las aplicaciones remotas, que ejecuta el cliente (nxclient) v칤a SSH, bajo la cuenta de usuario nx: la idea es similar al servidor de sftp que viene con OpenSSH. Otro dato desconcertante es que a priori cualquiera puede ejecutar nxserver, pues se ejecuta accediendo con una clave SSH que la clave privada es conocida por todo el mundo, pues viene con el cliente NX. Esto no deber칤a ser un problema de seguridad, pues nxserver autentica al cliente antes de hacer nada (que es invocar nxnode), pero es mejor si cambiamos la clave por otra, aunque entonces habr치 que cambiarla tambi칠n en todos los clientes. Por defecto nxserver para autenticar al cliente usa su usuario y contrase침a en el sistema, pero se puede mantener una lista de usuarios y contrase침as propia para no tener que usar la del sistema. Con nxserver --help podemos ver las ordenes disponibles para entre otras cosas administrar usuarios.</P
><P
>Si usamos el cliente oficial, es muy recomendable en configure/advanced la opci칩n "enable SSL encryption of all the traffic". Esta opci칩n tiene un nombre confuso, porque realmente no se usa SSL: lo que hace es utilizar la conexi칩n SSH para entubar todas las conexiones entre el nxnode local del cliente y el del servidor; estas conexiones ir치n cifradas, pero no con SSL sino con el protocolo de SSH, que es similar pero no es SSL. El inter칠s de esta opci칩n no est치 s칩lo en que se cifre sino en pasar los cortafuegos: sin ella habr칤a que abrir varios puertos, que adem치s van cambiando conforme se abren nuevas conexiones.</P
><P
>Algunas ideas para probar por qu칠 no funciona la conexi칩n:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>probar primero con el cliente oficial, con la opci칩n "enable SSL encryption of all the traffic". El problema m치s frecuente es de cortafuegos.</P
></LI
><LI
><P
>probar a conectar al servidor con <KBD
CLASS="userinput"
>ssh -i /usr/NX/share/keys/server.id_dsa.key nx@ip_servidor</KBD
> ; ejecutar <KBD
CLASS="userinput"
>login</KBD
> ; si no autentifica probar a a침adir el usuario manualmente. Si no ha sido posible conectar, comprobar si es problema de SSH; podemos por ejemplo conectarnos a la m치quina y ejecutar <KBD
CLASS="userinput"
>su -- nx</KBD
>; si al entrar en la cuenta del usuario "nx" no se abre una shell en la que podemos ejecutar login, es que no est치 correctamente instalado.</P
></LI
></OL
><P
>La informaci칩n proporcionada como se ha dicho es para el caso "NX Free Edition", que es software privativo. En el caso del software GPL liberado por NoMachine, no existe por ejemplo nxnode sino nxproxy (tiene la misma funci칩n, utilizar un t칰nel que se podr치 utilizar directamente o mejor mediante nxagent). </P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN649"
>7.4.2. NX y software libre</A
></H2
><P
>El proyecto FreeNX (<A
HREF="http://freenx.berlios.de/"
TARGET="_top"
>http://freenx.berlios.de</A
>) permite instalar un servidor NX (i.e. el lado de las aplicaciones remotas) utilizando software libre. FreeNX lo que hace es compilar el c칩digo GPL que ofrece NoMachine y a침adirle scripts para lograr una soluci칩n funcional, pues el software GPL de no machine implementa la tecnolog칤a pero no por ejemplo las herramientas para administrar las conexiones. FreeNX no forma parte de Ubuntu, ni siquiera se incluye en el repositorio Universe (s칩lo se incluye el componente nxproxy, para usarse s칩lo en el lado cliente), pero hay un repositorio externo que se puede utilizar: <A
HREF="https://help.ubuntu.com/community/FreeNX"
TARGET="_top"
>https://help.ubuntu.com/community/FreeNX</A
> . FreeNX tiene fallos de dise침o que lo hacen dif칤cil de mantener y por ello se est치 redise침ando. Es significativo que hace a침os Ubuntu incluyera FreeNX en su distribuci칩n y decidiera dejar de hacerlo, aunque el c칩digo actual ha mejorado. </P
><P
>FreeNX incluye el servidor, pero no un cliente. Como cliente es habitual utilizar el cliente freeware pero no libre de NoMachine; por ejemplo es el utilizado por la distribuci칩n para hacer thin clients ThinStation. La 칰nica alternativa libre "usable" es QtNX/Nxcl; NXCL es una librer칤a, con una implementaci칩n de referencia en GTK+. El mismo autor de QtNX y NXCL est치 integrando la tecnolog칤a NX en m치s clientes y empaquetando versiones m치s recientes del c칩digo libre de NoMachine que el proporcionado por el propio proyecto FreeNX; es muy recomendable buscar en su blog sobre NX en <A
HREF="http://blog.gwright.org.uk/articles/search?q=NX"
TARGET="_top"
>http://blog.gwright.org.uk/articles/search?q=NX</A
>. Otra implementaci칩n completa de NX (incluido el cliente) bajo GPL, obtenida tras comprar una licencia a NX de todo el c칩digo fuente de la versi칩n 1.5 y liberarlo bajo GPL: <A
HREF="http://code.2x.com/linuxterminalserver/downloads"
TARGET="_top"
>http://code.2x.com/linuxterminalserver/downloads</A
>. Sin embargo este c칩digo ha quedado anticuado, dado que NX ha ido incorporando novedades en sus versiones 2.x y 3.x.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x613.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="c657.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>RDP. Escritorio remoto de Windows</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c562.html"
ACCESSKEY="U"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Proxies, cortafuegos, software de filtrado</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>