<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Usuarios que estuvieron en el sistema</title><meta name="generator" content="DocBook XSL Stylesheets V1.71.0"><link rel="start" href="index.html" title="Utilización y Administración avanzada de sistemas GNU/Linux y aplicaciones Software Libre para estudiantes universitarios"><link rel="up" href="ch09.html" title="Capítulo 9. Auditoria y Logs"><link rel="prev" href="ch09.html" title="Capítulo 9. Auditoria y Logs"><link rel="next" href="ch09s03.html" title="Permisos SUID y SGID"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Usuarios que estuvieron en el sistema</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch09.html">Anterior</a> </td><th width="60%" align="center">Capítulo 9. Auditoria y Logs</th><td width="20%" align="right"> <a accesskey="n" href="ch09s03.html">Siguiente</a></td></tr></table><hr></div><div class="sect1" lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2571897"></a>Usuarios que estuvieron en el sistema</h2></div></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2571902"></a>El fichero <code class="filename">/var/log/wtmp</code></h3></div></div></div><p>En este fichero se almacenan las conexiones, mediante login, realizadas con éxito. Es un fichero con formato binario y para leerlo tendremos que utilizar el comando <span><strong class="command">last</strong></span>.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Importante</h3><p>Cada vez que se apaga el sistema se logea una entrada con el usuario <span class="emphasis"><em>reboot</em></span>. De esta forma podemos ver los reincios de la máquina.</p></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Importante</h3><p>Si el fichero no se encuentra en el sistema no se logea la actividad.</p></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Importante</h3><p>Este fichero es de acceso en modo lectura para todos los usuarios del sistema.</p></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2571948"></a>El commando <span class="emphasis"><em>last</em></span></h3></div></div></div><p>Permite ver las conexiones realizadas con éxito a nuestra máquina, si se estan logeando en <code class="filename">/var/log/wtmp</code>.</p><pre class="screen">
<code class="prompt">[root@sal]# </code><strong class="userinput"><code>last</code></strong>
<code class="computeroutput">jose     :0                            Mon Apr  9 19:46   still logged in   
reboot   system boot  2.6.17.8         Mon Apr  9 19:46 - 20:42 (2+00:56)   
root     tty1                          Mon Apr  9 07:54 - down   (00:04)    
reboot   system boot  2.6.17.8         Mon Apr  9 07:51 - 07:58  (00:07)    
jose     :0                            Sun Apr  8 16:47 - 00:35  (07:48)    
reboot   system boot  2.6.17.8         Sun Apr  8 16:46 - 00:35  (07:48)    
jose     :0                            Wed Apr  4 20:30 - 20:57  (00:27)    
reboot   system boot  2.6.17.8         Wed Apr  4 20:29 - 20:57  (00:28)    
jose     :0                            Fri Mar 30 15:53 - down   (00:17)    
reboot   system boot  2.6.17.8         Fri Mar 30 15:52 - 16:10  (00:17)    
jose     :0                            Thu Mar 29 20:10 - 02:02  (05:51)    
reboot   system boot  2.6.17.8         Thu Mar 29 20:08 - 02:02  (05:54)    
rrey     :0                            Thu Mar 29 11:46 - 12:09  (00:22)    
reboot   system boot  2.6.17.8         Thu Mar 29 11:46 - 12:09  (00:23)    
rrey     :0                            Thu Mar 29 09:47 - 11:37  (01:49)    
reboot   system boot  2.6.17.8         Thu Mar 29 09:46 - 11:37  (01:50)    
jose     :0                            Wed Mar 28 19:48 - 00:14  (04:26)    
reboot   system boot  2.6.17.8         Wed Mar 28 19:47 - 00:15  (04:27)    
rrey     :0                            Wed Mar 28 14:30 - 17:02  (02:31)    
reboot   system boot  2.6.17.8         Wed Mar 28 14:29 - 17:02  (02:32)    
rrey     :0                            Wed Mar 28 09:13 - 09:22  (00:08)    
reboot   system boot  2.6.17.8         Wed Mar 28 09:12 - 09:22  (00:09)    
rrey     :0                            Wed Mar 28 00:25 - 00:57  (00:32)    
jose     :0                            Wed Mar 28 00:09 - 00:24  (00:15)    
reboot   system boot  2.6.17.8         Wed Mar 28 00:08 - 00:58  (00:49)    
jose     :0                            Mon Mar 26 07:52 - 07:56  (00:03)    
reboot   system boot  2.6.17.8         Mon Mar 26 07:51 - 07:56  (00:04)    
jose     :0                            Sun Mar 25 23:31 - 00:37  (01:06)    
reboot   system boot  2.6.17.8         Sun Mar 25 23:31 - 00:37  (01:06)    
jose     :0                            Sun Mar 25 21:28 - 21:55  (00:27)    
reboot   system boot  2.6.17.8         Sun Mar 25 20:26 - 21:55  (01:28)    
jose     :0                            Thu Mar 22 23:27 - 00:09  (00:42)    
reboot   system boot  2.6.17.8         Thu Mar 22 23:24 - 00:09  (00:45)    
jose     :0                            Thu Mar 22 07:35 - 07:44  (00:09)    
reboot   system boot  2.6.17.8         Thu Mar 22 07:34 - 07:44  (00:10)    
jose     :0                            Tue Mar 20 19:48 - 01:58  (06:09)    
reboot   system boot  2.6.17.8         Tue Mar 20 19:47 - 01:58  (06:10)    
reboot   system boot  2.6.17.8         Mon Mar 19 22:15 - 01:58 (1+03:43)   
jose     :0                            Mon Mar 19 20:12 - down   (01:16)    
reboot   system boot  2.6.17.8         Mon Mar 19 20:09 - 21:28  (01:18)    
jose     :0                            Mon Mar 19 07:15 - down   (00:40)    
reboot   system boot  2.6.17.8         Mon Mar 19 07:15 - 07:56  (00:41)    
jose     :0                            Sun Mar 18 22:58 - down   (01:40)    
reboot   system boot  2.6.17.8         Sun Mar 18 21:26 - 00:39  (03:13)    
jose     :0                            Fri Mar 16 16:04 - down   (02:15)    
reboot   system boot  2.6.17.8         Fri Mar 16 16:02 - 18:20  (02:17)    
jose     :0                            Fri Mar 16 07:45 - 07:57  (00:12)    
reboot   system boot  2.6.17.8         Fri Mar 16 07:44 - 07:58  (00:13)    
jose     :0                            Thu Mar 15 22:42 - 22:58  (00:16)    
reboot   system boot  2.6.17.8         Thu Mar 15 22:41 - 22:58  (00:17)

wtmp begins Fri Mar  14 07:24:54 2007</code>
<code class="prompt">[root@sal]# </code>
</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Sugerencia</h3><p>Podemos ver los accesos en función de los terminales <span class="emphasis"><em>ttyn</em></span> pasandole como parámetro a <span><strong class="command">last</strong></span> el número de terminal <span class="emphasis"><em>n</em></span>.</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Sugerencia</h3><p>Podemos ver las conexiones a los terminales <span class="emphasis"><em>pts/n</em></span> pasandole como parámetro a <span><strong class="command">last</strong></span> <span class="emphasis"><em>pts/n</em></span>.</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Sugerencia</h3><p>Para aquellas conexiones establecidas en remoto podemos utilizar los flags <span class="emphasis"><em>-a</em></span> y <span class="emphasis"><em>-d</em></span> para conocer el hostname y la IP desde la que se conectaron.</p></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2572175"></a>El fichero <code class="filename">/var/log/btmp</code></h3></div></div></div><p>Este fichero es análogo al fichero <code class="filename">/var/log/wtmp</code> sólo que registra los intentos fallidos de conexión.</p></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2572198"></a>El comando <span><strong class="command">lastb</strong></span></h3></div></div></div><p>Tiene la misma funcionalidad que el comando <span><strong class="command">last</strong></span> sólo que para los intentos fallidos de conexión.</p></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2572220"></a>El fichero <code class="filename">/var/log/lastlog</code></h3></div></div></div><p>El fichero almacena la última vez que los usuarios accedieron al sistema. Tiene formato binario con lo cual para consultarlo es necesario utilizar el comando <span><strong class="command">lastlog</strong></span>.</p></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2572244"></a>El comando <span><strong class="command">lastlog</strong></span></h3></div></div></div><p>Imprime por la salida estándar la última vez que un usuario se conecto al sistema.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch09.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="ch09.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="ch09s03.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">Capítulo 9. Auditoria y Logs </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Permisos <span class="emphasis"><em>SUID</em></span> y <span class="emphasis"><em>SGID</em></span></td></tr></table></div></body></html>
