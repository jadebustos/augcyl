<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Gestión de usuarios</title><meta name="generator" content="DocBook XSL Stylesheets V1.71.0"><link rel="start" href="index.html" title="Utilización y Administración avanzada de sistemas GNU/Linux y aplicaciones Software Libre para estudiantes universitarios"><link rel="up" href="ch08.html" title="Capítulo 8. Usuarios y permisos en GNU/Linux"><link rel="prev" href="ch08s02.html" title="Grupos de usuarios"><link rel="next" href="ch08s04.html" title="Permisos en GNU/Linux"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Gestión de usuarios</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch08s02.html">Anterior</a> </td><th width="60%" align="center">Capítulo 8. Usuarios y permisos en GNU/Linux</th><td width="20%" align="right"> <a accesskey="n" href="ch08s04.html">Siguiente</a></td></tr></table><hr></div><div class="sect1" lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2566430"></a>Gestión de usuarios</h2></div></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2566437"></a>Zona de disco reservada a cada usuario</h3></div></div></div><p>Cada usuario tiene un espacio en disco para tener sus datos. Este espacio es un directorio con su nombre que se encuentra en <code class="filename">/home/</code>.</p><p>Es posible encontrarlo también de las siguientes formas:</p><pre class="programlisting">
/home/b/pcm
/home/b/be/pcm
/home/futurama/pcm
/home/futurama/b/pcm
/home/futurama/b/be/pcm
...
</pre><p>Este tipo de estructuraciones se utilizan para una mejor organización de los usuarios y también para evitar exceder el número de entradas por directorio en aquellos sistemas con muchos usuarios.</p><p>El directorio personal suele estar almacenado en la variable de entorno <span class="emphasis"><em>$HOME</em></span> y también se le conoce como "<span class="emphasis"><em>~</em></span>".</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Importante</h3><p>Los administradores suelen establecer cuotas de disco en <code class="filename">/home/</code> para evitar que unos pocos usuarios monopolicen el uso del disco.</p></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2566495"></a>El fichero <code class="filename">/etc/passwd</code></h3></div></div></div><p>Este fichero guarda la información relativa a los usuarios del sistema. Debido a problemas de seguridad ahora se utiliza también el fichero <code class="filename">/etc/shadow</code>.</p><p>Una entrada típica:</p><pre class="programlisting">
pcm:x:501:501:Bender:/home/pcm:/bin/bash
</pre><p>Este fichero contiene una línea por cada usuario del sistema y cada línea son varios campos separados por ":":</p><div class="orderedlist"><ol type="1"><li><p>El primer campo es el nombre del usuario.</p></li><li><p>El segundo campo contenía el hashing de la contraseña del usuario. Es practica habitual el utilizar el <span class="emphasis"><em>shadowing</em></span> de contraseñs y esta información se encuentra ahora en el fichero <code class="filename">/etc/shadow</code> razón por la cual este campo suele contener una "<span class="emphasis"><em>x</em></span>".</p></li><li><p>El tercer campo contiene el UID del usuario.</p></li><li><p>El cuarto campo contiene el GID del usuario.</p></li><li><p>El quinto campo o campo <span class="emphasis"><em>GECOS</em></span>(General Electric Comprehensive Operating Supervisor) contiene información relativa al usuario como nombre, departamento, ...</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Sugerencia</h3><p>No conviene poner información sensible en este campo ya que es visible por todo el mundo que tenga acceso al sistema. Además si hay activados servicios como <span class="emphasis"><em>finger</em></span> es fácil obtener esa información sin necesidad de tener cuenta en el sistema.</p></div></li><li><p>En el sexto campo está el directorio personal del usuario.</p></li><li><p>En el septimo campo se encuentra el comando que se ejecutará cuando haya un inicio de sesión por parte del usuario. Si se prentende que el usuario trabaje en la máquina se pone una <span class="emphasis"><em>shell</em></span>.</p></li></ol></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Sugerencia</h3><p>Podemos deshabilitar temporalmente los accesos de un usuario al sistema añadiendo el carácter "<span class="emphasis"><em>*</em></span>" como primer carácter del segundo campo.</p></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2566643"></a>Añadiendo usuarios al sistema</h3></div></div></div><p>Sólo el usuario <span class="emphasis"><em>root</em></span> puede añdir usuarios al sistema. Aunque puede conceder privilegios a otros para hacerlo.</p><p>Se pueden utilizar dos comandos para ello:</p><div class="itemizedlist"><ul type="disc"><li><p><span><strong class="command">useradd</strong></span> binario para la creación de usuarios.</p></li><li><p><span><strong class="command">adduser</strong></span> es un script en PERL para la creación de usuarios.</p></li></ul></div><p>La forma típica para crear un usuario es:</p><pre class="screen">
<code class="prompt">[root@sal]# </code><strong class="userinput"><code>useradd -m -d /home/pcm -g pcm -G pcm,users,futurama -c "Bender" -s /bin/bash pcm</code></strong>
<code class="prompt">[root@sal]#</code>
</pre><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>-m</em></span> en caso de no existir el directorio del usuario lo crea.</p></li><li><p><span class="emphasis"><em>-d /home/pcm</em></span> indica cual va a ser el directorio del usuario.</p></li><li><p><span class="emphasis"><em>-g pcm</em></span> indica cual es el grupo principal del usuario.</p></li><li><p><span class="emphasis"><em>-G pcm,users,futurama</em></span> indica los grupos a los que perteneceráa el usuario.</p></li><li><p><span class="emphasis"><em>-c "Bender"</em></span> información del campo <span class="emphasis"><em>GECOS</em></span>.</p></li><li><p><span class="emphasis"><em>-s /bin/bash</em></span> indica la shell que utilizará el usuario.</p></li><li><p><span class="emphasis"><em>pcm</em></span> nombre del usuario.</p></li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Importante</h3><p>Cuando creamos un usuario se copian en su directorio todos los ficheros del directorio <code class="filename">/etc/skel/</code>.</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Sugerencia</h3><p>Es practica habitual crear un grupo con el mismo nombre que el usuario y utilizar este grupo como grupo primario del usuario. De esta forma se garantiza que sólo este el en ese grupo y pueda controlar mejor quien accede a sus ficheros.</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Sugerencia</h3><p>Al igual que con los grupos se suelen reservar rangos para tipos de usuarios.</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Sugerencia</h3><p>Podemos utilizar el flag <span class="emphasis"><em>-u</em></span> para indicar el UID del usuario.</p></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Importante</h3><p>Una vez creado el usuario será necesario establecerle un password utilizando el comando <span><strong class="command">passwd</strong></span>:</p><pre class="screen">
<code class="prompt">[root@sal]# </code><strong class="userinput"><code>passwd pcm</code></strong>
<code class="computeroutput">Enter new UNIX password: <strong class="userinput"><code>*******</code></strong>
Retype new UNIX password: <strong class="userinput"><code>*******</code></strong>
passwd: contraseña actualizada correctamente</code>
<code class="prompt">[root@sal]# </code>
</pre></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2566878"></a>Eliminando usuarios del sistema</h3></div></div></div><p>Sólo el usuario <span class="emphasis"><em>root</em></span> puede eliminar usuarios del sistema. Aunque puede conceder privilegios a otros para hacerlo.</p><p>Para eliminar usuarios del sistema se utiliza el comando <span><strong class="command">userdel</strong></span>:</p><pre class="screen">
<code class="prompt">[root@sal]# </code><strong class="userinput"><code>userdel pcm</code></strong>
<code class="prompt">[root@sal]# </code>
</pre><p>De esta forma eliminamos al usuario <span class="emphasis"><em>pcm</em></span> del sistema sin borrar su directorio personal.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Sugerencia</h3><p>Si quisieramos eliminar también su directorio personal tendrímos que haber utilizado el flag <span class="emphasis"><em>-r</em></span>.</p></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Importante</h3><p>No podremos eliminar un usuario si este tiene abierta una sesión. En caso de necesidad podemos desabilitar sus accesos al sistema mediante el uso del carácter "<span class="emphasis"><em>*</em></span>" y después matar todos sus procesos.</p></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2566956"></a>Modificando una cuenta existente en el sistema</h3></div></div></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Sugerencia</h3><p><span class="emphasis"><em>man usermod</em></span></p></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2566969"></a>El comando <span><strong class="command">id</strong></span></h3></div></div></div><p>Este comando se utiliza para obtener información sobre el UID y el GID de los usuarios:</p><pre class="screen">
<code class="prompt">[root@sal]# </code><strong class="userinput"><code>id</code></strong>
<code class="computeroutput">id jose
uid=1000(jose) gid=1000(jose) grupos=1000(jose),20(dialout),24(cdrom),25(floppy),29(audio),44(video),46(plugdev),1001(ftp)</code>
<code class="prompt">[root@sal]# </code>
</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch08s02.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="ch08.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="ch08s04.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">Grupos de usuarios </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Permisos en GNU/Linux</td></tr></table></div></body></html>
