<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Capítulo 10. Servicios</title><meta name="generator" content="DocBook XSL Stylesheets V1.71.0"><link rel="start" href="index.html" title="Utilización y Administración avanzada de sistemas GNU/Linux y aplicaciones Software Libre para estudiantes universitarios"><link rel="up" href="index.html" title="Utilización y Administración avanzada de sistemas GNU/Linux y aplicaciones Software Libre para estudiantes universitarios"><link rel="prev" href="ch09s05.html" title="Rotado de logs"><link rel="next" href="ch10s02.html" title="Servicios de Internet"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Capítulo 10. Servicios</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch09s05.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch10s02.html">Siguiente</a></td></tr></table><hr></div><div class="chapter" lang="es"><div class="titlepage"><div><div><h2 class="title"><a name="id2574435"></a>Capítulo 10. Servicios</h2></div></div></div><div class="toc"><p><b>Tabla de contenidos</b></p><dl><dt><span class="sect1"><a href="ch10.html#id2573821">Generalidades</a></span></dt><dt><span class="sect1"><a href="ch10s02.html">Servicios de Internet</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch10s02.html#id2575311"><span class="application">apache</span></a></span></dt><dt><span class="sect2"><a href="ch10s02.html#id2575344">Correo</a></span></dt><dt><span class="sect2"><a href="ch10s02.html#id2575355"><span class="application">ssh</span></a></span></dt><dt><span class="sect2"><a href="ch10s02.html#id2575387"><span class="application">xinetd</span></a></span></dt></dl></dd><dt><span class="sect1"><a href="ch10s03.html">Servicios de Ficheros y Impresión</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch10s03.html#id2575461"><span class="application">nfs</span></a></span></dt><dt><span class="sect2"><a href="ch10s03.html#id2575512"><span class="application">samba</span></a></span></dt><dt><span class="sect2"><a href="ch10s03.html#id2575534"><span class="application">cups</span></a></span></dt></dl></dd><dt><span class="sect1"><a href="ch10s04.html">Servicios de Base de Datos</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch10s04.html#id2575686"><span class="application">mySQL</span></a></span></dt><dt><span class="sect2"><a href="ch10s04.html#id2575722"><span class="application">PostgreSQL</span></a></span></dt></dl></dd></dl></div><p>Denominamos servicios en Linux a las aplicaciones, o
    conjunto de ellas, que están
    arrancadas esperando a ser utilizadas,
    o llevando a cabo tareas esenciales en "background".</p><p>Al ser Linux un sistema orientado a redes una parte importante son
    servicios de red, que utilizan el protocolo tcp/ip. Por ser
    tema a parte la administración de redes sólo describiremos los
    servicios sin entrar en al administración.</p><p></p><div class="sect1" lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2573821"></a>Generalidades</h2></div></div></div><p>Una vez que instalamos un servicio en Linux, normalmente
      debe ser configurado. Los servicios se deben configurar
      normalmente con sus parámetros de arranque, y también suele
      crear un fichero o un directorio en el directorio
      <code class="filename">/etc</code>.</p><p>Como el servicio será arrancado en el inicio de sistema, se
      suele crear un script de inicio en el directorio
      <code class="filename">/etc/init.d</code>. Es un shell script arrancable
      que recibe un parámetro que puede ser: start, stop,
      restart y status. Algunos servicios pueden tener otros parámetros, si lo
      ejecutamos sin parámetros nos mostrará los posibles.</p><div class="itemizedlist"><ul type="disc"><li><p>
Con <span class="emphasis"><em>start</em></span> arrancamos el servicio. Este parámetro es obligatorio en
cualquier script de arranque. Dependiendo el servicio que sea
configurará algunas características el servicio y ejecutará un proceso
que quedará como demonio (proceso en background con unas
características especiales).
</p></li><li><p>
<span class="emphasis"><em>Stop</em></span> nos permite parar el servicio. Si existe un proceso en background
del servicio, este será retenido. Es muy habitual que el servicio
cuando arranca deje un PID en un fichero, que permitirá al script
localizar y matar el proceso.
</p></li><li><p>
<span class="emphasis"><em>Restart</em></span> realiza una parada y luego arranca el sistema de nuevo.
</p></li><li><p>
<span class="emphasis"><em>Status</em></span> nos indica si el servicio esta arrancado.
</p></li></ul></div><p>Para arrancar por ejemplo el servicio de base de datos mysql, tendríamos:</p><pre class="screen">
<code class="prompt">[sal]# </code><strong class="userinput"><code>cd /etc/init.d</code></strong>
<code class="prompt">[sal]# </code><strong class="userinput"><code>./mysql</code></strong>
<code class="computeroutput">Usage: /etc/init.d/mysql start|stop|restart|reload|force-reload
</code>
<code class="prompt">[sal]# </code><strong class="userinput"><code>./mysql start</code></strong>
<code class="computeroutput">Starting MySQL database server: mysqld.
Checking for crashed MySQL tables in the background.
</code><code class="prompt">[sal]# </code>
</pre><p>Siempre que queramos podemos ir al directorio donde se encuentra
el script de arranque y ejecutarlo con el parámetro que nos
interese. Pero si queremos que el servicio se arranque cuando se
inicia el sistema y se pare cuando se apague o reinicie, los script
tiene que estar en un directorio preparado para ello. Lo que se hace
es enlazar (link) desde el directorio con el servicio en
<code class="filename">init.d</code>. Según el directorio donde lo pongamos se
arrancará en un determinado modo de arranque o se parará:</p><div class="table"><a name="id2574956"></a><p class="title"><b>Tabla 10.1. Tabla de modos</b></p><div class="table-contents"><table summary="Tabla de modos" border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="center">Modo</th><th align="center">Directorio</th><th align="center">Descripción</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">/etc/rc1.d</td><td align="center">Servicios que se arrancan cuando el sistema se arranca en modo
            de Usuario Único. No se permite conectar nada más que al
            root desde consola.</td></tr><tr><td align="center">2</td><td align="center">/etc/rc2.d</td><td align="center">Servicios que se arrancan en modo multiusuario, pero sin
            algunos servicios de red.</td></tr><tr><td align="center">3</td><td align="center">/etc/rc3.d</td><td align="center">Servicios que se arrancan en modo multiusuario, con los
            servicios de red
            arrancados, pero en modo consola, sin las X.</td></tr><tr><td align="center">4</td><td align="center">/etc/rc4.d</td><td align="center">No se suele utilizar.</td></tr><tr><td align="center">5</td><td align="center">/etc/rc5.d</td><td align="center">Servicios que se arrancan en modo multiusuario, con los
            servicios de red y X.</td></tr><tr><td align="center">6</td><td align="center">/etc/rc6.d</td><td align="center">Servicios que se ejecutan en parada o reinicio.</td></tr></tbody></table></div></div><br class="table-break"><p>Los modos de arranque de 2 al 4 son configurables por el
administrador realmente, lo descrito anterior es la
recomendación, pero la configuración por defecto de las distribuciones
es diferente en cada una de ellas. </p><p>El arranque de los servicios y
modo, así como alguna configuración de arranque más lo realiza el
proceso init que tiene el fichero de configuración <code class="filename">/etc/inittab</code>.</p><p>Los nombres los links en estos directorios es distinto a como
están denominados en <code class="filename">/etc/init.d</code>, tiene una
nomenclatura. La primera letra en una S cuando se llamará al servicio
con el parámetro start, y una K cuando se llame con el parámetro
stop. A continuación lleva el número en el que se quiere ejecutar el
servicio y luego el nombre. Vemos un ejemplo:</p><pre class="screen"><code class="prompt">[pcm@sal]$ </code><strong class="userinput"><code>cd /etc/rc2.d</code></strong>
<code class="prompt">[pcm@sal]$ </code><strong class="userinput"><code>ls -l</code></strong>
<code class="computeroutput">lrwxrwxrwx  1 root root 18 Feb 27  2004 S10sysklogd -&gt; ../init.d/sysklogd
lrwxrwxrwx  1 root root 15 Feb 27  2004 S11klogd -&gt; ../init.d/klogd
lrwxrwxrwx  1 root root 13 Feb 27  2004 S14ppp -&gt; ../init.d/ppp
lrwxrwxrwx  1 root root 17 Apr 30  2004 S18portmap -&gt; ../init.d/portmap
lrwxrwxrwx  1 root root 14 Feb 27  2004 S20apmd -&gt; ../init.d/apmd
lrwxrwxrwx  1 root root 26 Apr 24  2005 S20clamav-freshclam -&gt; ../init.d/clamav-freshclam
lrwxrwxrwx  1 root root 16 Feb 27  2004 S20cupsys -&gt; ../init.d/cupsys
lrwxrwxrwx  1 root root 17 Apr 24  2005 S20dirmngr -&gt; ../init.d/dirmngr
lrwxrwxrwx  1 root root 14 Feb 27  2004 S20exim -&gt; ../init.d/exim
lrwxrwxrwx  1 root root 13 Mar  4  2004 S20fam -&gt; ../init.d/fam
lrwxrwxrwx  1 root root 17 Mar  4  2004 S20hddtemp -&gt; ../init.d/hddtemp
lrwxrwxrwx  1 root root 15 Feb 27  2004 S20inetd -&gt; ../init.d/inetd
lrwxrwxrwx  1 root root 19 Feb 27  2004 S20linuxconf -&gt; ../init.d/linuxconf
lrwxrwxrwx  1 root root 14 Mar  5  2004 S20lisa -&gt; ../init.d/lisa
lrwxrwxrwx  1 root root 13 Feb 27  2004 S20lpd -&gt; ../init.d/lpd
lrwxrwxrwx  1 root root 17 Feb 27  2004 S20makedev -&gt; ../init.d/makedev
lrwxrwxrwx  1 root root 15 Apr 24  2005 S20mysql -&gt; ../init.d/mysql
lrwxrwxrwx  1 root root 27 Feb 27  2004 S20nfs-kernel-server -&gt; ../init.d/nfs-kernel-server
lrwxrwxrwx  1 root root 15 Feb 27  2004 S20samba -&gt; ../init.d/samba
lrwxrwxrwx  1 root root 13 Feb 27  2004 S20ssh -&gt; ../init.d/ssh
lrwxrwxrwx  1 root root 18 Apr 30  2004 S20timidity -&gt; ../init.d/timidity
lrwxrwxrwx  1 root root 16 Feb 18 14:06 S20webmin -&gt; ../init.d/webmin
lrwxrwxrwx  1 root root 23 Feb  3  2006 S20wpasupplicant -&gt; ../init.d/wpasupplicant
lrwxrwxrwx  1 root root 20 Mar  4  2004 S21nfs-common -&gt; ../init.d/nfs-common
lrwxrwxrwx  1 root root 18 Oct 24  2004 S21quotarpc -&gt; ../init.d/quotarpc
lrwxrwxrwx  1 root root 17 Feb 29  2004 S21sensord -&gt; ../init.d/sensord
lrwxrwxrwx  1 root root 15 Apr 24  2005 S50pcscd -&gt; ../init.d/pcscd
lrwxrwxrwx  1 root root 24 Aug 24  2005 S85vpnclient_init -&gt; ../init.d/vpnclient_init
lrwxrwxrwx  1 root root 13 Feb 27  2004 S89atd -&gt; ../init.d/atd
lrwxrwxrwx  1 root root 14 Feb 27  2004 S89cron -&gt; ../init.d/cron
lrwxrwxrwx  1 root root 16 Feb 27  2004 S91apache -&gt; ../init.d/apache
lrwxrwxrwx  1 root root 15 Mar  4  2004 S98local -&gt; ../init.d/local
lrwxrwxrwx  1 root root 13 Feb 27  2004 S99kdm -&gt; ../init.d/kdm
lrwxrwxrwx  1 root root 19 Feb 27  2004 S99rmnologin -&gt; ../init.d/rmnologin
lrwxrwxrwx  1 root root 23 Mar  4  2004 S99stop-bootlogd -&gt; ../init.d/stop-bootlogd
</code><code class="prompt">[pcm@sal]$ </code>
</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch09s05.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch10s02.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">Rotado de logs </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Servicios de Internet</td></tr></table></div></body></html>
