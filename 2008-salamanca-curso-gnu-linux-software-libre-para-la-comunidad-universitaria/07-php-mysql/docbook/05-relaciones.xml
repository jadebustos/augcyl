<?xml version='1.0' encoding='utf-8'?>
  <chapter>
    <title>Inclusi&oacute;n de relaciones</title>
    <section>
      <title>Directorio de Alumnos</title>
      <para></para>
      <para>index.php de alumnos</para>
      <informalexample>
        <programlisting role="PHP">
          &#60;&#63;php
          &#47;&#47;incluimos el fichero config.php para coger los datos de la conexi&oacute;n
          include_once('..&#47;config.php');
          &#47;&#47;cogemos las variables de las coneci&oacute;n para que se puedan utilizar en el script
          global $server, $database, $user, $passwd;
          &#47;&#47;abrimos la conexi&oacute;n
          $conexion = mysql_connect($server,$user,$passwd);
          &#47;&#47;elegimos la BBDD
          mysql_select_db ($database, $conexion) OR die ("No se puede conectar");

          &#63;&#62;
          &#60;html&#62;
            &#60;head&#62;
              &#60;TITLE&#62;B&uacute;squeda de Asignaturas&#60;&#47;TITLE&#62;
              &#60;LINK REL="stylesheet" TYPE="text&#47;css"
              HREF="..&#47;estilo.css" &#47;&#62;
            &#60;&#47;head&#62;
            &#60;body&#62;
              &#60;p&#62;B&uacute;squeda de Asignaturas.&#60;&#47;p&#62;&#60;&#63;php
              &#47;&#47; coloca el enlace que permite a&ntilde;adir un alumno
              echo "&#60;p&#62;&#60;A HREF='nuevo.php'&#62;Nuevo&#60;&#47;A&#62;&#60;&#47;p&#62;";
              &#47;&#47; se inicia el formulario de la b&uacute;squeda
              echo "&#60;form method=\"post\" action=\"buscar.php\"&#62;";
              &#47;&#47; se indica que el campo de busqueda tiene 20 caracteres de longitud
              echo "&#60;input type=\"text\" name=\"busqueda\" size=20 maxlength =100 value=\"".$_POST['busqueda']."\"&#62;";
              &#47;&#47; se coloca el boton que se paretara para realizar la busqueda
              echo "&#60;input type=\"submit\" name=\"buscar\" value=\"Buscar\"&#62;&#60;&#47;form&#62;&#60;br&#62;";
              &#47;&#47; se rellena la busqueda por todos los campos de la tabla, se debe substituir alumnos por el nombre de la tabla y 
              &#47;&#47; poner tantos nombre_de_campo LIKE '%".$_POST['busqueda']."%' OR como campos haya.
              $sql="SELECT * FROM asignaturas where nombre LIKE '%".$_POST['busqueda']."%';";
              &#47;&#47; se realiza la busqueda
              $result=mysql_query($sql,$conexion);
              &#47;&#47;Se comprueba si hay resultados en la busqueda
              if($row= mysql_fetch_array($result)){
              &#47;&#47; si hay resultados crea la tabla
              echo "&#60;TABLE BORDER='1'&#62;";
              &#47;&#47;pone los campos de la tabla tiene que haber tantos &#60;TD CLASS=\"titulo\"&#62;Nombre_de_campo&#60;&#47;TD&#62; como campos haya
              echo "&#60;TR&#62;&#60;TD CLASS=\"titulo\"&#62;Nombre&#60;&#47;TD&#62;&#60;TD colspan=3  CLASS=\"titulo\"&#62;Opciones&#60;&#47;TD&#62;&#60;&#47;TR&#62;";
              &#47;&#47;coloca las l&iacute;neas de la tabla
              DO
              {
              &#47;&#47;aqui se ponen tantas l&iacute;neas &#60;TD width=300 CLASS=\"linea\"&#62;".$row["nombre_de_campo"]."&#60;&#47;TD&#62; como campos haya en la tabla
              &#47;&#47; se coloca el inicio de la fila
              echo "&#60;TR&#62;";
              &#47;&#47;se coloca el campos del nombre
              echo "&#60;TD width=300 CLASS=\"linea\"&#62;".$row["nombre"]."&#60;&#47;TD&#62;";
              &#47;&#47;se colocan los enlaces de ver editar y borrar alumno
              echo "&#60;TD CLASS=\"linea\"&#62;&#60;A HREF=ver.php&#63;id=".$row['id']."&#62;Ver&#60;&#47;A&#62;&#60;&#47;TD&#62;";
              echo "&#60;TD width=50 CLASS=\"linea\"&#62;&#60;A HREF=editar.php&#63;id=".$row['id']."&#62;Editar&#60;&#47;A&#62;&#60;&#47;TD&#62;";
              echo "&#60;TD width=50 CLASS=\"linea\"&#62;&#60;A HREF=borrar.php&#63;id=".$row['id']."&#62;Borrar&#60;&#47;A&#62;&#60;&#47;TD&#62;";
              &#47;&#47;se termina la fila
              echo "&#60;&#47;TR&#62;";
              }
              &#47;&#47;Comprueba si se ha terminado de poner l&iacute;neas
              WHILE ($row=mysql_fetch_array($result));
              &#47;&#47;como se ha terminado de poner l&iacute;neas se acaba la tabla
              echo "&#60;&#47;TABLE&#62;&#60;br&#62;";
              &#47;&#47;coloca el enlace para volver al listado
              echo "&#60;A HREF=\"index.php\"&#62;Volver&#60;&#47;A&#62;";
              }else{
              &#47;&#47;si no hay registros que coincidan con la busqueda se le indica al usuario
              echo "La b&uacute;squeda no coincide con ning&uacute;n registro de la BBDD&#60;BR&#62;";
              &#47;&#47;se coloca el enlace del volver al listado
              echo "&#60;A HREF=\"index.php\"&#62;Volver&#60;&#47;A&#62;";

              }
              &#63;&#62;
            &#60;&#47;body&#62;
          &#60;&#47;html&#62;
        </programlisting>
      </informalexample>
      <para>N&oacute;tese como en la tercera parte del fichero
      hay una nueva consulta en busca de los nombres de los tipos
      de alumno para poder encontrar el nombre de la que
      est&aacute; relacionada con cada alumno. Por lo
      dem&aacute;s es como cualquier otro index.php de
      directorio.</para>
      <para>ver.php de alumnos</para>
      <informalexample>
        <programlisting role="PHP">
          &#60;&#63;php
          &#47;&#47;incluimos el fichero config.php para coger los datos de la conexi&oacute;n
          include_once('..&#47;config.php');
          &#47;&#47;cogemos las variables de las coneci&oacute;n para que se puedan utilizar en el script
          global $server, $database, $user, $passwd;
          &#47;&#47;abrimos la conexi&oacute;n
          $conexion = mysql_connect($server,$user,$passwd);
          &#47;&#47;elegimos la BBDD
          mysql_select_db ($database, $conexion) OR die ("No se puede conectar");
          &#47;&#47;rellenamos la consulta, cambiar alumnos por el nombre de la tabla a listar
          $sql="Select * from alumnos WHERE id=".$_GET['id'].";";
          &#47;&#47;re realiza la consulta
          $result=mysql_query($sql,$conexion);
          &#47;&#47;print $sql;
          &#47;&#47;se coge el registro del alumno
          $row= mysql_fetch_array($result);
          &#63;&#62;
          &#60;html&#62;
            &#60;head&#62;
              &#60;TITLE&#62;Alumno:&#60;&#63;php echo $row['nombre']; &#63;&#62;&#60;&#47;TITLE&#62;
              &#60;LINK REL="stylesheet" TYPE="text&#47;css"
              HREF="..&#47;estilo.css" &#47;&#62;
            &#60;&#47;head&#62;
            &#60;body&#62;
              &#60;&#63;php
              &#47;&#47;en esta parte se muestran los campos del alumno
              &#47;&#47;se debe a&ntilde;adir l&iacute;neas tantas como campos tenga la tabla: echo "&#60;p&#62;Nombre de campo:".$row["nombre_de_campo"]."&#60;&#47;p&#62;";
              &#47;&#47;se muestra el c&oacute;digo del alumno
              echo "&#60;p&#62;C&oacute;digo:".$row["id"]."&#60;&#47;p&#62;";
              &#47;&#47;se muestra el nombre del alumno
              echo "&#60;p&#62;Nombre:".$row["nombre"]."&#60;&#47;p&#62;";
              &#47;&#47;se muestra el dni del alumno
              echo "&#60;p&#62;DNI:".$row["dni"]."&#60;&#47;p&#62;";
              $sql2="Select * from tipos_de_alumno where id_tipo_de_alumno=".$row['id_tipo_de_alumno'].";";
              &#47;&#47;echo $sql2;
              &#47;&#47;re realiza la consulta para meter en $result2 los tipos de alumnos
              $result2=mysql_query($sql2,$conexion);
              &#47;&#47;coloca en $row2 el primer tipo de alumno
              $row2= mysql_fetch_array($result2);
              echo "&#60;p&#62;Tipo de Alumno:".$row2["nombre"]."&#60;&#47;p&#62;";
              &#47;&#47;se coloca el enlace para que pueda editarse el alumno.
              echo "&#60;p&#62;&#60;A HREF=editar.php&#63;id=".$row['id']."&#62;Editar&#60;&#47;A&#62;&#60;&#47;TD&#62;&#60;&#47;p&#62;";
              &#47;&#47; se coloca el enlace para borrar el alumno
              echo "&#60;p&#62;&#60;A HREF=borrar.php&#63;id=".$row['id']."&#62;Borrar&#60;&#47;A&#62;&#60;&#47;TD&#62;&#60;&#47;p&#62;";
              &#47;&#47; se coloca el enlace para ver la matriculas de alumno
              echo "&#60;p&#62;&#60;A HREF=ver_matriculas.php&#63;id=".$row['id']."&#62;Ver Matriculas&#60;&#47;A&#62;&#60;&#47;TD&#62;&#60;&#47;p&#62;";
              &#47;&#47; se coloca el enlace para ir a listado de alumnos
              echo "&#60;p&#62;&#60;A HREF='index.php'&#62;Atras&#60;&#47;A&#62;&#60;&#47;p&#62;";
              &#63;&#62;
            &#60;&#47;body&#62;
          &#60;&#47;html&#62;
        </programlisting>
      </informalexample>
      <para>Aqu&iacute; al final de la tercera parte se ve como
      se muestra un enlace a un nuevo fichero que permite la
      visualizaci&oacute;n de las matr&iacute;culas de
      dicho alumno.</para>
      <para>editar.php de alumnos</para>
      <informalexample>
        <programlisting role="PHP">
          &#60;&#63;php 
          &#47;&#47;incluimos el fichero config.php para coger los datos de la conexi&#63;n
          include_once('..&#47;config.php');
          &#47;&#47;cogemos las variables de las coneci&#63;n para que se puedan utilizar en el script
          global $server, $database, $user, $passwd;
          &#47;&#47;abrimos la conexi&#63;n
          $conexion = mysql_connect($server,$user,$passwd);
          &#47;&#47;elegimos la BBDD
          mysql_select_db ($database, $conexion) OR die ("No se puede conectar");
          &#47;&#47;rellenamos la consulta, cambiar alumnos por el nombre de la tabla a listar
          $sql="Select * from alumnos WHERE id=".$_GET['id'].";";
          &#47;&#47;re realiza la consulta
          $result=mysql_query($sql,$conexion);
          &#47;&#47;print $sql;
          &#47;&#47;se coge el registro del alumno
          $row= mysql_fetch_array($result);
          &#63;&#62;
          &#60;html&#62;
            &#60;head&#62;
              &#60;TITLE&#62;Nuevo Alumno&#60;&#47;TITLE&#62;
              &#60;LINK REL="stylesheet" TYPE="text&#47;css"
              HREF="..&#47;estilo.css" &#47;&#62;
            &#60;&#47;head&#62;
            &#60;body&#62;
              &#60;&#63;php
              &#47;&#47;se mira si se est&#63; enviando el formulario de edici&#63;n del alumno
              if(!isset( $_POST['editar']))
              {
              &#47;&#47;Si se est&#63; enviando el formulario
              &#47;&#47;echo "&#60;p&#62;Vuelva a intentarlo&#60;&#47;p&#62;";
              &#47;&#47;se abre el formulario que envia los datos de las modificaciones de ese registro
                              echo "&#60;form method=\"post\" action=\"editar.php&#63;id=".$_GET['id']."\" &#62;";
              &#47;&#47; muestra el c&#63;digo del alumno
                              echo "Codigo:".$row['id']."&#60;br&#62;";
              &#47;&#47; a partir de aqui se muestran los campos a rellenar en el formulario
              &#47;&#47; si se substituye echo "Nombre : &#60;input type=\"text\" name=\"nombre\" value=\"".$row['nombre']."\" maxlength =200 size=40&#62;&#60;br&#62;";
              &#47;&#47; por echo "Nombre : &#60;input type=\"text\" name=\"nombre_de_campo\" value=\"".$row['nombre']."\" maxlength =longitud_maxima_de_campo 
              &#47;&#47;  size=tama&#63;o_dte_la_caja&#62;&#60;br&#62;";
              &#47;&#47; se muestra la caja del nombre del alumno
                              echo "Nombre : &#60;input type=\"text\" name=\"nombre\" value=\"".$row['nombre']."\" maxlength =200 size=40&#62;&#60;br&#62;";
              &#47;&#47; se muestra la caja del dni
                              echo "DNI : &#60;input type=\"text\" name=\"dni\" value=\"".$row['dni']."\" maxlength =10 size=10&#62;&#60;br&#62;";
              &#47;&#47;inicia la combo de los tipos
              echo "Tipo de Alumno:";
              echo "&#60;select name=\"tipo_de_alumno\"&#62;";
              &#47;&#47;rellena la sql para buscar las asignaturas
              $sql2="Select * from tipos_de_alumno;";
              &#47;&#47;re realiza la consulta para meter en $result2 las asignaturas
              $result2=mysql_query($sql2,$conexion);
              &#47;&#47;coloca en $row2 la primera asignatura
              $row2= mysql_fetch_array($result2);
              DO
              {
              &#47;&#47;coloca la asignatura en el listado
              echo "&#60;option value=\"".$row2['id_tipo_de_alumno']."\"";
              if($row2['id_tipo_de_alumno']==$row['id_tipo_de_alumno'])
                      echo "selected";
              echo "&#62;".$row2['nombre']."&#60;&#47;option&#62;";
              }
              &#47;&#47;comprueba si hay m&aacute;s tipos de alumno
              while ($row2= mysql_fetch_array($result2));
              &#47;&#47;si no hay mas tipos de alumno cierra el listado
              echo "&#60;&#47;select&#62; &#60;br&#62;&#60;br&#62;";
              &#47;&#47; se pone el bot&#63;n de guardar los datos
                              echo "&#60;input type=\"submit\" name=\"editar\" value=\"Guardar\"&#62;&#60;&#47;form&#62;&#60;br&#62;";
              }else{
              &#47;&#47; si se env&#63;a el formulario hay que coger los datos del formulario y meterlos en la BBDD
              &#47;&#47; aqui se deben a&#63;adir tantos isset($_POST['nombre_de_campo']) &amp;&amp; como campos haya en la bbdd
                      if(isset($_POST['nombre']) &amp;&amp; isset($_POST['dni']) &amp;&amp; isset($_POST['tipo_de_alumno'])){
              &#47;&#47;se desactiva el contenido de la variable $sql
                              unset($sql);
              &#47;&#47; se rellena la consulta que inserta los datos
              &#47;&#47;se ponen tantos `nombre_de_campo` = '".$_POST['nombre_de_campo']."',

                              $sql="UPDATE `alumnos` SET `nombre` = '".$_POST['nombre']."',`dni` = '".$_POST['dni']."',`id_tipo_de_alumno` = '".
                              $_POST['tipo_de_alumno']."' WHERE `id` =".$_GET['id']." LIMIT 1 ;";
                              &#47;&#47;echo $sql;
                              &#47;&#47;print_r ($_POST);
              &#47;&#47;se envia la inserci&#63;n de datos en la BBDD
                              $result=mysql_query($sql,$conexion);
              &#47;&#47;Se informa por la p&#63;gina web que el alumno ha sido modificado
                              echo "&#60;p&#62;Alumno Modificado&#60;&#47;p&#62;";
              &#47;&#47;se coloca el bot&#63;n que hace volver al listado de alumnos
                              echo "&#60;p&#62;&#60;A HREF='index.php'&#62;Volver&#60;&#47;A&#62;&#60;&#47;p&#62;";
                      }else{
                      &#47;&#47; se informa al usuario que no se han rellenado los campos
              print_r($_POST);
                      echo "Vuelva a intentarlo.&#60;br&#62;";
                      &#47;&#47;se abre el formulario que envia los datos de las modificaciones de ese registro
                              echo "&#60;form method=\"post\" action=\"editar.php&#63;id=".$_GET['id']."\" &#62;";
              &#47;&#47; muestra el c&#63;digo del alumno
                              echo "Codigo:".$row['id']."&#60;br&#62;";
              &#47;&#47; a partir de aqui se muestran los campos a rellenar en el formulario
              &#47;&#47; si se substituye echo "Nombre : &#60;input type=\"text\" name=\"nombre\" value=\"".$row['nombre']."\" maxlength =200 size=40&#62;&#60;br&#62;";
              &#47;&#47; por echo "Nombre : &#60;input type=\"text\" name=\"nombre_de_campo\" value=\"".$row['nombre']."\" maxlength =longitud_maxima_de_campo 
              &#47;&#47; size=tama&#63;o_dte_la_caja&#62;&#60;br&#62;";
              &#47;&#47; se muestra la caja del nombre del alumno
                              echo "Nombre : &#60;input type=\"text\" name=\"nombre\" value=\"".$row['nombre']."\" maxlength =200 size=40&#62;&#60;br&#62;";
              &#47;&#47; se muestra la caja del dni
                              echo "DNI : &#60;input type=\"text\" name=\"dni\" value=\"".$row['dni']."\" maxlength =10 size=10&#62;&#60;br&#62;";
              &#47;&#47; se pone el bot&#63;n de guardar los datos
                              echo "&#60;input type=\"submit\" name=\"editar\" value=\"Guardar\"&#62;&#60;&#47;form&#62;&#60;br&#62;";    
                      }
              }
              &#63;&#62;
            &#60;&#47;body&#62;
          &#60;&#47;html&#62;
        </programlisting>
      </informalexample>
      <para>Cabe destacar la seg&uacute;nda b&uacute;squeda
      en la tabla de tipos de alumno para ocnstuir el tag select
      (combobox)</para>
      <para>borrar.php de alumnos</para>
      <informalexample>
        <programlisting role="PHP">
          &#60;&#63;php 
          &#47;&#47;incluimos el fichero config.php para coger los datos de la conexi&oacute;n
          include_once('..&#47;config.php');
          &#47;&#47;cogemos las variables de las coneci&oacute;n para que se puedan utilizar en el script
          global $server, $database, $user, $passwd;
          &#47;&#47;abrimos la conexi&oacute;n
          $conexion = mysql_connect($server,$user,$passwd);
          &#47;&#47;elegimos la BBDD
          mysql_select_db ($database, $conexion) OR die ("No se puede conectar");
          &#47;&#47;rellenamos la consulta, cambiar alumnos por el nombre de la tabla a listar
          $sql="Select * from alumnos WHERE id=".$_GET['id'].";";
          &#47;&#47;re realiza la consulta
          $result=mysql_query($sql,$conexion);
          &#47;&#47;print $sql;
          &#47;&#47;se coge el registro del alumno
          $row= mysql_fetch_array($result);
          &#63;&#62;
          &#60;html&#62;
            &#60;head&#62;
              &#60;TITLE&#62;Borrar Alumno&#60;&#47;TITLE&#62;
              &#60;LINK REL="stylesheet" TYPE="text&#47;css"
              HREF="..&#47;estilo.css" &#47;&#62;
            &#60;&#47;head&#62;
            &#60;body&#62;
              &#60;&#63;php
              &#47;&#47; se rellena la consulta que borra el alumno se substituye alumno por el nombre de la tabla 
              $sql="DELETE from `alumnos` WHERE `id` =".$_GET['id']." LIMIT 1 ;";
              &#47;&#47;echo $sql;
              &#47;&#47; se ejecuta la consulta se borrado
              $result=mysql_query($sql,$conexion);
              &#47;&#47; se informa de que se ha eliminado un alumno
              echo "&#60;p&#62;Alumno eliminado&#60;&#47;p&#62;";
              &#47;&#47; se coloca el enlace que permite volver al listado
              echo "&#60;p&#62;&#60;A HREF='index.php'&#62;Volver&#60;&#47;A&#62;&#60;&#47;p&#62;";

              &#63;&#62;
            &#60;&#47;body&#62;
          &#60;&#47;html&#62;
        </programlisting>
      </informalexample>
      <para>buscar.php de alumnos</para>
      <informalexample>
        <programlisting role="PHP">
          &#60;&#63;php
          &#47;&#47;incluimos el fichero config.php para coger los datos de la conexi&oacute;n
          include_once('..&#47;config.php');
          &#47;&#47;cogemos las variables de las coneci&oacute;n para que se puedan utilizar en el script
          global $server, $database, $user, $passwd;
          &#47;&#47;abrimos la conexi&oacute;n
          $conexion = mysql_connect($server,$user,$passwd);
          &#47;&#47;elegimos la BBDD
          mysql_select_db ($database, $conexion) OR die ("No se puede conectar");

          &#63;&#62;
          &#60;html&#62;
            &#60;head&#62;
              &#60;TITLE&#62;B&uacute;squeda de Alumnos&#60;&#47;TITLE&#62;
              &#60;LINK REL="stylesheet" TYPE="text&#47;css"
              HREF="..&#47;estilo.css" &#47;&#62;
            &#60;&#47;head&#62;
            &#60;body&#62;
              &#60;p&#62;B&uacute;squeda de Alumnos.&#60;&#47;p&#62;&#60;&#63;php
              &#47;&#47; coloca el enlace que permite a&ntilde;adir un alumno
              echo "&#60;p&#62;&#60;A HREF='nuevo.php'&#62;Nuevo&#60;&#47;A&#62;&#60;&#47;p&#62;";
              &#47;&#47; se inicia el formulario de la b&uacute;squeda
              echo "&#60;form method=\"post\" action=\"buscar.php\"&#62;";
              &#47;&#47; se indica que el campo de busqueda tiene 20 caracteres de longitud
              echo "&#60;input type=\"text\" name=\"busqueda\" size=20 maxlength =20 value=\"".$_POST['busqueda']."\"&#62;";
              &#47;&#47; se coloca el boton que se paretara para realizar la busqueda
              echo "&#60;input type=\"submit\" name=\"buscar\" value=\"Buscar\"&#62;&#60;&#47;form&#62;&#60;br&#62;";
              &#47;&#47; se rellena la busqueda por todos los campos de la tabla, se debe substituir alumnos por el nombre de la tabla y poner tantos nombre_de_campo LIKE '%".$_POST['busqueda']."%' OR como campos haya.
              $sql="SELECT * FROM alumnos where nombre LIKE '%".$_POST['busqueda']."%' OR dni LIKE '%".$_POST['busqueda']."%';";
              &#47;&#47; se realiza la busqueda
              $result=mysql_query($sql,$conexion);
              &#47;&#47;Se comprueba si hay resultados en la busqueda
              if($row= mysql_fetch_array($result)){
              &#47;&#47; si hay resultados crea la tabla
              echo "&#60;TABLE BORDER='1'&#62;";
              &#47;&#47;pone los campos de la tabla tiene que haber tantos &#60;TD CLASS=\"titulo\"&#62;Nombre_de_campo&#60;&#47;TD&#62; como campos haya
              echo "&#60;TR&#62;&#60;TD CLASS=\"titulo\"&#62;Nombre&#60;&#47;TD&#62;&#60;TD CLASS=\"titulo\"&#62;DNI&#60;&#47;TD&#62;&#60;TD colspan=3  CLASS=\"titulo\"&#62;Opciones&#60;&#47;TD&#62;&#60;&#47;TR&#62;";
              &#47;&#47;coloca las l&iacute;neas de la tabla
              DO
              {
              &#47;&#47;aqui se ponen tantas l&iacute;neas &#60;TD width=300 CLASS=\"linea\"&#62;".$row["nombre_de_campo"]."&#60;&#47;TD&#62; como campos haya en la tabla
              &#47;&#47; se coloca el inicio de la fila
              echo "&#60;TR&#62;";
              &#47;&#47;se coloca el campos del nombre
              echo "&#60;TD width=300 CLASS=\"linea\"&#62;".$row["nombre"]."&#60;&#47;TD&#62;";
              &#47;&#47;se coloca el campo del dni
              echo "&#60;TD width=160 CLASS=\"linea\"&#62;".$row["dni"]."&#60;&#47;TD&#62;";
              &#47;&#47;se colocan los enlaces de ver editar y borrar alumno
              echo "&#60;TD CLASS=\"linea\"&#62;&#60;A HREF=ver.php&#63;id=".$row['id']."&#62;Ver&#60;&#47;A&#62;&#60;&#47;TD&#62;";
              echo "&#60;TD width=50 CLASS=\"linea\"&#62;&#60;A HREF=editar.php&#63;id=".$row['id']."&#62;Editar&#60;&#47;A&#62;&#60;&#47;TD&#62;";
              echo "&#60;TD width=50 CLASS=\"linea\"&#62;&#60;A HREF=borrar.php&#63;id=".$row['id']."&#62;Borrar&#60;&#47;A&#62;&#60;&#47;TD&#62;";
              &#47;&#47;se termina la fila
              echo "&#60;&#47;TR&#62;";
              }
              &#47;&#47;Comprueba si se ha terminado de poner l&iacute;neas
              WHILE ($row=mysql_fetch_array($result));
              &#47;&#47;como se ha terminado de poner l&iacute;neas se acaba la tabla
              echo "&#60;&#47;TABLE&#62;&#60;br&#62;";
              &#47;&#47;coloca el enlace para volver al listado
              echo "&#60;A HREF=\"index.php\"&#62;Volver&#60;&#47;A&#62;";
              }else{
              &#47;&#47;si no hay registros que coincidan con la busqueda se le indica al usuario
              echo "La b&uacute;squeda no coincide con ning&uacute;n registro de la BBDD&#60;BR&#62;";
              &#47;&#47;se coloca el enlace del volver al listado
              echo "&#60;A HREF=\"index.php\"&#62;Volver&#60;&#47;A&#62;";

              }
              &#63;&#62;
            &#60;&#47;body&#62;
          &#60;&#47;html&#62;
        </programlisting>
      </informalexample>
      <para>nuevo.php de alumnos</para>
      <informalexample>
        <programlisting role="PHP">
          &#60;&#63;php 
          &#47;&#47;incluimos el fichero config.php para coger los datos de la conexi&oacute;n
          include_once('..&#47;config.php');
          &#47;&#47;cogemos las variables de las coneci&oacute;n para que se puedan utilizar en el script
          global $server, $database, $user, $passwd;
          &#47;&#47;abrimos la conexi&oacute;n
          $conexion = mysql_connect($server,$user,$passwd);
          &#47;&#47;elegimos la BBDD
          mysql_select_db ($database, $conexion) OR die ("No se puede conectar");

          &#63;&#62;
          &#60;html&#62;
            &#60;head&#62;
              &#60;TITLE&#62;Nuevo Alumno&#60;&#47;TITLE&#62;
              &#60;LINK REL="stylesheet" TYPE="text&#47;css"
              HREF="..&#47;estilo.css" &#47;&#62;
            &#60;&#47;head&#62;
            &#60;body&#62;
              &#60;&#63;php
              &#47;&#47;comprueba si se entas enviando datos para guardar
              &#47;&#47;si no es asi es que tiene que presentar el formulario
              if(!isset( $_POST['nuevo']))
              {
              &#47;&#47;coloca el principio del formulario para que vuelva al mismo script cuando se rellene
                      echo "&#60;form method=\"post\" action=\"nuevo.php\"&#62;";
              &#47;&#47;aqui se deben poner tantas l&iacute;neas echo como campos haya
              &#47;&#47;cambiando el echo "Nombre : &#60;input type=\"text\" name=\"nombre\" maxlength=200 size=40&#62;&#60;br&#62;";
              &#47;&#47; por echo "Nombre : &#60;input type=\"text\" name=\"nombre_campo\" maxlength=longitud_campo size=tama&ntilde;o_caja_texto&#62;&#60;br&#62;";
              &#47;&#47; se muestra la caja del nombre del alumno
                              echo "Nombre : &#60;input type=\"text\" name=\"nombre\" maxlength =100 size=40&#62;&#60;br&#62;";
              &#47;&#47; se muestra la caja del dni del alumno
                              echo "DNI : &#60;input type=\"text\" name=\"dni\" maxlength =15 size=9&#62;&#60;br&#62;";
              &#47;&#47;inicia la combo de los tipos
              echo "Tipo de Alumno:";
              echo "&#60;select name=\"tipo_de_alumno\"&#62;";
              &#47;&#47;rellena la sql para buscar las asignaturas
              $sql2="Select * from tipos_de_alumno;";
              &#47;&#47;re realiza la consulta para meter en $result2 las asignaturas
              $result2=mysql_query($sql2,$conexion);
              &#47;&#47;coloca en $row2 la primera asignatura
              $row2= mysql_fetch_array($result2);
              DO
              {
              &#47;&#47;coloca la asignatura en el listado
              echo "&#60;option value=\"".$row2['id_tipo_de_alumno']."\"&#62;".$row2['nombre']."&#60;&#47;option&#62;";
              }
              &#47;&#47;comprueba si hay m&aacute;s tipos de alumno
              while ($row2= mysql_fetch_array($result2));
              &#47;&#47;si no hay mas tipos de alumno cierra el listado
              echo "&#60;&#47;select&#62; &#60;br&#62;&#60;br&#62;";
              &#47;&#47;&#47;&#47;se coloca el bot&oacute;n de guardar
                      echo "&#60;input type=\"submit\" name=\"nuevo\" value=\"Guardar\"&#62;&#60;&#47;form&#62;&#60;br&#62;";
              }else{
              &#47;&#47;si se han metido los datos en el formulario
              &#47;&#47;se deben colocar tantos isset($_POST['nombre_campo']) &amp;&amp; como campos haya en la tabla
                      if(isset($_POST['nombre']) &amp;&amp; isset($_POST['dni']) &amp;&amp;  isset($_POST['tipo_de_alumno'])){
              &#47;&#47;en esta linea se ponen los nombres de los campos separados por comas y en la parte de values lo mismo pero con variables $_POST['nombre_campo']
              &#47;&#47;se reinician las variables de la busqueda
              unset($result2);
              unset($row2);

              &#47;&#47;rellena la sql para buscar las asignaturas
              $sql2="Select * from tipos_de_alumno;";
              &#47;&#47;echo $sql2;
              &#47;&#47;re realiza la consulta para meter en $result2 las asignaturas
              $result2=mysql_query($sql2,$conexion);
              &#47;&#47;echo $result2;
              &#47;&#47;coloca en $row2 la primera asignatura
              $row2= mysql_fetch_array($result2);
              &#47;&#47;busca que id tiene la asignatura
              DO
              {
              &#47;&#47;si el nombre coincide con el elegido en el formulario coge el nombre y el id de la asignatura
              if($row2['id_tipo_de_alumno']==$_POST['tipo_de_alumno']){
                      &#47;&#47;echo "hemos entrao!!";
                      $nombre_asig=$row2['nombre'];
                      &#47;&#47;echo $nombre_asig;
                      $id_tipo_de_alumno=$row2['id_tipo_de_alumno'];
                      &#47;&#47;echo $id_asig;
                      break;
              }
              }
              &#47;&#47;comprueba si hay m&aacute;s asignaturas
              while ($row2= mysql_fetch_array($result2));             
              $sql="INSERT INTO `alumnos` ( `id` , `nombre` , `dni`, `id_tipo_de_alumno` )
                              VALUES (NULL , '".$_POST['nombre']."' , '".$_POST['dni']."', '".$id_tipo_de_alumno."');";
                              &#47;&#47;echo $sql;
              &#47;&#47;se ejecuta la inserci&oacute;n de datos
                              $result=mysql_query($sql,$conexion);
              &#47;&#47;se informa de que se a&ntilde;adido un nuevo alumno
                              echo "&#60;p&#62;Alumno A&ntilde;adido&#60;&#47;p&#62;";
              &#47;&#47;se coloca el enlace que permite volver al listado
                              echo "&#60;p&#62;&#60;A HREF='index.php'&#62;Volver&#60;&#47;A&#62;&#60;&#47;p&#62;";
                      }else{
              &#47;&#47; si no nos han metido campos
                              echo "&#60;p&#62;Vuelva a intentarlo&#60;&#47;p&#62;";
              &#47;&#47; se vuelve a colocar el formulario con los mismos campos que ahora, la diferenia es que se pone tantas veces como campos haya en los VALUE el $_POST['nombre_de_campo'] para que no haya que volver a teclearlo
                      
                      echo "&#60;form method=\"post\" action=\"nuevo.php&#63;id=".$_GET['id']."\"&#62;";
              &#47;&#47;aqui se deben poner tantas l&iacute;neas echo como campos haya
              &#47;&#47;cambiando el echo "Nombre : &#60;input type=\"text\" name=\"nombre\" maxlength=200 size=40&#62;&#60;br&#62;";
              &#47;&#47; por echo "Nombre : &#60;input type=\"text\" name=\"nombre_campo\" maxlength=longitud_campo size=tama&ntilde;o_caja_texto&#62;&#60;br&#62;";
              &#47;&#47; se muestra la caja del nombre del alumno
                              echo "Nombre : &#60;input type=\"text\" name=\"nombre\" maxlength =100 size=40&#62;&#60;br&#62;";
              &#47;&#47; se muestra la caja del dni del alumno
                              echo "DNI : &#60;input type=\"text\" name=\"nombre\" maxlength =15 size=9&#62;&#60;br&#62;";
              &#47;&#47;inicia la combo de los tipos
              echo "&#60;select name=\"tipo_de_alumno\"&#62;";
              &#47;&#47;rellena la sql para buscar las asignaturas
              $sql2="Select * from tipos_de_alumno;";
              &#47;&#47;re realiza la consulta para meter en $result2 las asignaturas
              $result2=mysql_query($sql2,$conexion);
              &#47;&#47;coloca en $row2 la primera asignatura
              $row2= mysql_fetch_array($result2);
              DO
              {
              &#47;&#47;coloca la asignatura en el listado
              echo "&#60;option value=\"".$row2['id_tipo_de_alumno']."\"&#62;".$row2['nombre']."&#60;&#47;option&#62;";
              }
              &#47;&#47;comprueba si hay m&aacute;s tipos de alumno
              while ($row2= mysql_fetch_array($result2));
              &#47;&#47;si no hay mas tipos de alumno cierra el listado
              echo "&#60;&#47;select&#62; &#60;br&#62;&#60;br&#62;";
              &#47;&#47;&#47;&#47;se coloca el bot&oacute;n de guardar
                      echo "&#60;input type=\"submit\" name=\"nuevo\" value=\"Guardar\"&#62;&#60;&#47;form&#62;&#60;br&#62;";
                      }
              }
              &#63;&#62;
            &#60;&#47;body&#62;
          &#60;&#47;html&#62;
        </programlisting>
      </informalexample>
      <para>Cabe destacar la seg&uacute;nda b&uacute;squeda
      en la tabla de tipos de alumno para ocnstuir el tag select
      (combobox)</para>
      <para>matricular.php alumnos</para>
      <informalexample>
        <programlisting role="PHP">
          &#60;&#63;php
          &#47;&#47;incluimos el fichero config.php para coger los datos de la conexi&oacute;n
          include_once('..&#47;config.php');
          &#47;&#47;cogemos las variables de las coneci&oacute;n para que se puedan utilizar en el script
          global $server, $database, $user, $passwd;
          &#47;&#47;abrimos la conexi&oacute;n
          $conexion = mysql_connect($server,$user,$passwd);
          &#47;&#47;elegimos la BBDD
          mysql_select_db ($database, $conexion) OR die ("No se puede conectar");
          &#47;&#47;rellenamos la consulta, cambiar alumnos por el nombre de la tabla a listar
          $sql="Select * from alumnos WHERE id=".$_GET['id'].";";
          &#47;&#47;print $sql;
          &#47;&#47;re realiza la consulta
          $result=mysql_query($sql,$conexion);
          &#47;&#47;mete el alumno en la variable $row
          $row= mysql_fetch_array($result);

          &#47;&#47;print $sql2;
          &#63;&#62;
          &#60;html&#62;
            &#60;head&#62;
              &#60;TITLE&#62;Matricular
              Alumno:&#60;&#63;php echo $row['nombre']; &#63;&#62;&#60;&#47;TITLE&#62;
              &#60;LINK REL="stylesheet" TYPE="text&#47;css"
              HREF="..&#47;estilo.css" &#47;&#62;
            &#60;&#47;head&#62;
            &#60;body&#62;
              &#60;&#63;php
              &#47;&#47;comprueba si se entas enviando datos para guardar
              &#47;&#47;si no es asi es que tiene que presentar el formulario
              if(!isset( $_POST['nuevo']))
              {
              &#47;&#47;coloca el principio del formulario para que vuelva al mismo script cuando se rellene
                      echo "&#60;form method=\"post\" action=\"matricular.php&#63;id=".$_GET['id']."\"&#62;";
              &#47;&#47;aqui se deben poner tantas l&iacute;neas echo como campos haya
              &#47;&#47;cambiando el echo "Nombre : &#60;input type=\"text\" name=\"nombre\" maxlength=200 size=40&#62;&#60;br&#62;";
              &#47;&#47; por echo "Nombre : &#60;input type=\"text\" name=\"nombre_campo\" maxlength=longitud_campo size=tama&ntilde;o_caja_texto&#62;&#60;br&#62;";
              &#47;&#47;se muestra el c&oacute;digo del alumno
              echo "&#60;p&#62;C&oacute;digo:".$row["id"]."&#60;&#47;p&#62;";
              &#47;&#47;se muestra el nombre del alumno
              echo "&#60;p&#62;Nombre:".$row["nombre"]."&#60;&#47;p&#62;";
                      
              &#47;&#47;se coloca la caja oculta con el id del alumno
                      echo "&#60;input type=\"hidden\" name=\"id_alum\" value=\"".$row['id']."\"&#62;";
              &#47;&#47;inicia la combo de las asignaturas
              echo "&#60;select name=\"asignatura\"&#62;";
              &#47;&#47;rellena la sql para buscar las asignaturas
              $sql2="Select * from asignaturas;";
              &#47;&#47;re realiza la consulta para meter en $result2 las asignaturas
              $result2=mysql_query($sql2,$conexion);
              &#47;&#47;coloca en $row2 la primera asignatura
              $row2= mysql_fetch_array($result2);
              DO
              {
              &#47;&#47;coloca la asignatura en el listado
              echo "&#60;option value=\"".$row2['id']."\"&#62;".$row2['nombre']."&#60;&#47;option&#62;";
              }
              &#47;&#47;comprueba si hay m&aacute;s asignaturas
              while ($row2= mysql_fetch_array($result2));
              &#47;&#47;si no hay mas asignatutas cierra el listado de asignaturas
              echo "&#60;&#47;select&#62; &#60;br&#62;&#60;br&#62;";
              &#47;&#47;&#47;&#47;se coloca el bot&oacute;n de guardar
                      echo "&#60;input type=\"submit\" name=\"nuevo\" value=\"Guardar\"&#62;&#60;&#47;form&#62;&#60;br&#62;";
              }else{
              &#47;&#47;si se han metido los datos en el formulario
              &#47;&#47;se deben colocar tantos isset($_POST['nombre_campo']) &amp;&amp; como campos haya en la tabla
                      if(isset($_POST['id_alum']) &amp;&amp; isset($_POST['asignatura'])){

              &#47;&#47;se reinician las variables de la busqueda
              unset($result2);
              unset($row2);

              &#47;&#47;rellena la sql para buscar las asignaturas
              $sql2="Select * from asignaturas;";
              &#47;&#47;echo $sql2;
              &#47;&#47;re realiza la consulta para meter en $result2 las asignaturas
              $result2=mysql_query($sql2,$conexion);
              &#47;&#47;echo $result2;
              &#47;&#47;coloca en $row2 la primera asignatura
              $row2= mysql_fetch_array($result2);
              &#47;&#47;busca que id tiene la asignatura
              DO
              {
              &#47;&#47;si el nombre coincide con el elegido en el formulario coge el nombre y el id de la asignatura
              if($row2['id']==$_POST['asignatura']){
                      &#47;&#47;echo "hemos entrao!!";
                      $nombre_asig=$row2['nombre'];
                      &#47;&#47;echo $nombre_asig;
                      $id_asig=$row2['id'];
                      &#47;&#47;echo $id_asig;
                      break;
              }
              }
              &#47;&#47;comprueba si hay m&aacute;s asignaturas
              while ($row2= mysql_fetch_array($result2));


                              $sql="INSERT INTO `matriculas` ( `id_mat` , `id_alum` , `id_asig` )
                              VALUES (NULL , ".$_POST['id_alum']." , ".$_POST['asignatura'].")";
                              &#47;&#47;echo $sql;
              &#47;&#47;se ejecuta la inserci&oacute;n de datos
                              $result=mysql_query($sql,$conexion);
              &#47;&#47;se informa de que se a&ntilde;adido un nuevo alumno
                              echo "&#60;p&#62;Matr&iacute;cula a&ntilde;adida del alumno ".$row['nombre']." en la asignatura ".$nombre_asig."&#60;&#47;p&#62;";
              &#47;&#47;se coloca el enlace que permite volver al listado
                              echo "&#60;p&#62;&#60;A HREF='ver_matriculas.php&#63;id=".$_GET['id']."'&#62;Volver&#60;&#47;A&#62;&#60;&#47;p&#62;";
                      }else{
              &#47;&#47; si no nos han metido campos
                              echo "&#60;p&#62;Vuelva a intentarlo&#60;&#47;p&#62;";
              &#47;&#47; se vuelve a colocar el formulario con los mismos campos que ahora, la diferenia es que se pone tantas veces como campos haya en los VALUE el $_POST['nombre_de_campo'] para que no haya que volver a teclearlo
                      echo "&#60;form method=\"post\" action=\"matricular.php\"&#62;";
              &#47;&#47;aqui se deben poner tantas l&iacute;neas echo como campos haya
              &#47;&#47;cambiando el echo "Nombre : &#60;input type=\"text\" name=\"nombre\" maxlength=200 size=40&#62;&#60;br&#62;";
              &#47;&#47; por echo "Nombre : &#60;input type=\"text\" name=\"nombre_campo\" maxlength=longitud_campo size=tama&ntilde;o_caja_texto&#62;&#60;br&#62;";
              &#47;&#47;se muestra el c&oacute;digo del alumno
              echo "&#60;p&#62;C&oacute;digo:".$row["id"]."&#60;&#47;p&#62;";
              &#47;&#47;se muestra el nombre del alumno
              echo "&#60;p&#62;Nombre:".$row["nombre"]."&#60;&#47;p&#62;";
                      
              &#47;&#47;se coloca la caja oculta con el id del alumno
                      echo "id : &#60;input type=\"hidden\" name=\"id_alum\" value=\"".$row['id']."\"&#62;&#60;br&#62;";
              &#47;&#47;inicia la combo de las signaturas
              echo "&#60;select name=\"asignatura\"&#62;";
              &#47;&#47;rellena la sql para buscar las asignaturas
              $sql2="Select * from asignaturas;";
              &#47;&#47;re realiza la consulta para meter en $result2 las asignaturas
              $result2=mysql_query($sql2,$conexion);
              &#47;&#47;coloca en $row2 la primera asignatura
              $row2= mysql_fetch_array($result2);
              DO
              {
              &#47;&#47;coloca la asignatura en el listado
              echo "&#60;option&#62;".$row2['nombre']."&#60;&#47;option&#62;";
              }
              &#47;&#47;comprueba si hay m&aacute;s asignaturas
              while ($row2= mysql_fetch_array($result2));
              &#47;&#47;si no hay mas asignatutas cierra el listado de asignaturas
              echo "&#60;&#47;select&#62; ";
              &#47;&#47;&#47;&#47;se coloca el bot&oacute;n de guardar
                      echo "&#60;input type=\"submit\" name=\"nuevo\" value=\"Guardar\"&#62;&#60;&#47;form&#62;&#60;br&#62;";
                      }
              }
              &#63;&#62;
            &#60;&#47;body&#62;
          &#60;&#47;html&#62;
        </programlisting>
      </informalexample>
      <para>Este es un caso un poco peculiar, ya que dado un alumno
      se le intenta matricular en alguna de las asignaturas
      disponibles. Por lo tanto debe buscar todas las asignaturas y
      colocarlas en el select. Y luego hacer la
      insercci&oacute;n en la tabla de relaciones
      (matriculas).</para>
      <para>ver_matriculas.php alumnos</para>
      <informalexample>
        <programlisting role="PHP">
          &#60;&#63;php
          &#47;&#47;incluimos el fichero config.php para coger los datos de la conexi&oacute;n
          include_once('..&#47;config.php');
          &#47;&#47;cogemos las variables de las coneci&oacute;n para que se puedan utilizar en el script
          global $server, $database, $user, $passwd;
          &#47;&#47;abrimos la conexi&oacute;n
          $conexion = mysql_connect($server,$user,$passwd);
          &#47;&#47;elegimos la BBDD
          mysql_select_db ($database, $conexion) OR die ("No se puede conectar");
          &#47;&#47;rellenamos la consulta, cambiar alumnos por el nombre de la tabla a listar
          $sql="Select * from alumnos WHERE id=".$_GET['id'].";";
          &#47;&#47;print $sql;
          &#47;&#47;re realiza la consulta
          $result=mysql_query($sql,$conexion);
          &#47;&#47;mete el alumno en la variable $row
          $row= mysql_fetch_array($result);

          &#47;&#47;print $sql2;
          &#63;&#62;
          &#60;html&#62;
            &#60;head&#62;
              &#60;TITLE&#62;Matricular
              Alumno:&#60;&#63;php echo $row['nombre']; &#63;&#62;&#60;&#47;TITLE&#62;
              &#60;LINK REL="stylesheet" TYPE="text&#47;css"
              HREF="..&#47;estilo.css" &#47;&#62;
            &#60;&#47;head&#62;
            &#60;body&#62;
              &#60;&#63;php
              &#47;&#47;comprueba si se entas enviando datos para guardar
              &#47;&#47;si no es asi es que tiene que presentar el formulario
              if(!isset( $_POST['nuevo']))
              {
              &#47;&#47;coloca el principio del formulario para que vuelva al mismo script cuando se rellene
                      echo "&#60;form method=\"post\" action=\"matricular.php&#63;id=".$_GET['id']."\"&#62;";
              &#47;&#47;aqui se deben poner tantas l&iacute;neas echo como campos haya
              &#47;&#47;cambiando el echo "Nombre : &#60;input type=\"text\" name=\"nombre\" maxlength=200 size=40&#62;&#60;br&#62;";
              &#47;&#47; por echo "Nombre : &#60;input type=\"text\" name=\"nombre_campo\" maxlength=longitud_campo size=tama&ntilde;o_caja_texto&#62;&#60;br&#62;";
              &#47;&#47;se muestra el c&oacute;digo del alumno
              echo "&#60;p&#62;C&oacute;digo:".$row["id"]."&#60;&#47;p&#62;";
              &#47;&#47;se muestra el nombre del alumno
              echo "&#60;p&#62;Nombre:".$row["nombre"]."&#60;&#47;p&#62;";
                      
              &#47;&#47;se coloca la caja oculta con el id del alumno
                      echo "&#60;input type=\"hidden\" name=\"id_alum\" value=\"".$row['id']."\"&#62;";
              &#47;&#47;inicia la combo de las asignaturas
              echo "&#60;select name=\"asignatura\"&#62;";
              &#47;&#47;rellena la sql para buscar las asignaturas
              $sql2="Select * from asignaturas;";
              &#47;&#47;re realiza la consulta para meter en $result2 las asignaturas
              $result2=mysql_query($sql2,$conexion);
              &#47;&#47;coloca en $row2 la primera asignatura
              $row2= mysql_fetch_array($result2);
              DO
              {
              &#47;&#47;coloca la asignatura en el listado
              echo "&#60;option value=\"".$row2['id']."\"&#62;".$row2['nombre']."&#60;&#47;option&#62;";
              }
              &#47;&#47;comprueba si hay m&aacute;s asignaturas
              while ($row2= mysql_fetch_array($result2));
              &#47;&#47;si no hay mas asignatutas cierra el listado de asignaturas
              echo "&#60;&#47;select&#62; &#60;br&#62;&#60;br&#62;";
              &#47;&#47;&#47;&#47;se coloca el bot&oacute;n de guardar
                      echo "&#60;input type=\"submit\" name=\"nuevo\" value=\"Guardar\"&#62;&#60;&#47;form&#62;&#60;br&#62;";
              }else{
              &#47;&#47;si se han metido los datos en el formulario
              &#47;&#47;se deben colocar tantos isset($_POST['nombre_campo']) &amp;&amp; como campos haya en la tabla
                      if(isset($_POST['id_alum']) &amp;&amp; isset($_POST['asignatura'])){

              &#47;&#47;se reinician las variables de la busqueda
              unset($result2);
              unset($row2);

              &#47;&#47;rellena la sql para buscar las asignaturas
              $sql2="Select * from asignaturas;";
              &#47;&#47;echo $sql2;
              &#47;&#47;re realiza la consulta para meter en $result2 las asignaturas
              $result2=mysql_query($sql2,$conexion);
              &#47;&#47;echo $result2;
              &#47;&#47;coloca en $row2 la primera asignatura
              $row2= mysql_fetch_array($result2);
              &#47;&#47;busca que id tiene la asignatura
              DO
              {
              &#47;&#47;si el nombre coincide con el elegido en el formulario coge el nombre y el id de la asignatura
              if($row2['id']==$_POST['asignatura']){
                      &#47;&#47;echo "hemos entrao!!";
                      $nombre_asig=$row2['nombre'];
                      &#47;&#47;echo $nombre_asig;
                      $id_asig=$row2['id'];
                      &#47;&#47;echo $id_asig;
                      break;
              }
              }
              &#47;&#47;comprueba si hay m&aacute;s asignaturas
              while ($row2= mysql_fetch_array($result2));


                              $sql="INSERT INTO `matriculas` ( `id_mat` , `id_alum` , `id_asig` )
                              VALUES (NULL , ".$_POST['id_alum']." , ".$_POST['asignatura'].")";
                              &#47;&#47;echo $sql;
              &#47;&#47;se ejecuta la inserci&oacute;n de datos
                              $result=mysql_query($sql,$conexion);
              &#47;&#47;se informa de que se a&ntilde;adido un nuevo alumno
                              echo "&#60;p&#62;Matr&iacute;cula a&ntilde;adida del alumno ".$row['nombre']." en la asignatura ".$nombre_asig."&#60;&#47;p&#62;";
              &#47;&#47;se coloca el enlace que permite volver al listado
                              echo "&#60;p&#62;&#60;A HREF='ver_matriculas.php&#63;id=".$_GET['id']."'&#62;Volver&#60;&#47;A&#62;&#60;&#47;p&#62;";
                      }else{
              &#47;&#47; si no nos han metido campos
                              echo "&#60;p&#62;Vuelva a intentarlo&#60;&#47;p&#62;";
              &#47;&#47; se vuelve a colocar el formulario con los mismos campos que ahora, la diferenia es que se pone tantas veces como campos haya en los VALUE el $_POST['nombre_de_campo'] para que no haya que volver a teclearlo
                      echo "&#60;form method=\"post\" action=\"matricular.php\"&#62;";
              &#47;&#47;aqui se deben poner tantas l&iacute;neas echo como campos haya
              &#47;&#47;cambiando el echo "Nombre : &#60;input type=\"text\" name=\"nombre\" maxlength=200 size=40&#62;&#60;br&#62;";
              &#47;&#47; por echo "Nombre : &#60;input type=\"text\" name=\"nombre_campo\" maxlength=longitud_campo size=tama&ntilde;o_caja_texto&#62;&#60;br&#62;";
              &#47;&#47;se muestra el c&oacute;digo del alumno
              echo "&#60;p&#62;C&oacute;digo:".$row["id"]."&#60;&#47;p&#62;";
              &#47;&#47;se muestra el nombre del alumno
              echo "&#60;p&#62;Nombre:".$row["nombre"]."&#60;&#47;p&#62;";
                      
              &#47;&#47;se coloca la caja oculta con el id del alumno
                      echo "id : &#60;input type=\"hidden\" name=\"id_alum\" value=\"".$row['id']."\"&#62;&#60;br&#62;";
              &#47;&#47;inicia la combo de las signaturas
              echo "&#60;select name=\"asignatura\"&#62;";
              &#47;&#47;rellena la sql para buscar las asignaturas
              $sql2="Select * from asignaturas;";
              &#47;&#47;re realiza la consulta para meter en $result2 las asignaturas
              $result2=mysql_query($sql2,$conexion);
              &#47;&#47;coloca en $row2 la primera asignatura
              $row2= mysql_fetch_array($result2);
              DO
              {
              &#47;&#47;coloca la asignatura en el listado
              echo "&#60;option&#62;".$row2['nombre']."&#60;&#47;option&#62;";
              }
              &#47;&#47;comprueba si hay m&aacute;s asignaturas
              while ($row2= mysql_fetch_array($result2));
              &#47;&#47;si no hay mas asignatutas cierra el listado de asignaturas
              echo "&#60;&#47;select&#62; ";
              &#47;&#47;&#47;&#47;se coloca el bot&oacute;n de guardar
                      echo "&#60;input type=\"submit\" name=\"nuevo\" value=\"Guardar\"&#62;&#60;&#47;form&#62;&#60;br&#62;";
                      }
              }
              &#63;&#62;
            &#60;&#47;body&#62;
          &#60;&#47;html&#62;
        </programlisting>
      </informalexample>
      <para>borrar_matricula.php alumnos</para>
      <informalexample>
        <programlisting role="PHP">
          &#60;&#63;php 
          &#47;&#47;incluimos el fichero config.php para coger los datos de la conexi&oacute;n
          include_once('..&#47;config.php');
          &#47;&#47;cogemos las variables de las coneci&oacute;n para que se puedan utilizar en el script
          global $server, $database, $user, $passwd;
          &#47;&#47;abrimos la conexi&oacute;n
          $conexion = mysql_connect($server,$user,$passwd);
          &#47;&#47;elegimos la BBDD
          mysql_select_db ($database, $conexion) OR die ("No se puede conectar");
          &#47;&#47;rellenamos la consulta, cambiar alumnos por el nombre de la tabla a listar
          $sql="Select * from matriculas WHERE id_mat=".$_GET['id'].";";
          &#47;&#47;re realiza la consulta
          $result=mysql_query($sql,$conexion);
          &#47;&#47;print $sql;
          &#47;&#47;se coge el registro del alumno
          $row= mysql_fetch_array($result);
          &#63;&#62;
          &#60;html&#62;
            &#60;head&#62;
              &#60;TITLE&#62;Borrar Alumno&#60;&#47;TITLE&#62;
              &#60;LINK REL="stylesheet" TYPE="text&#47;css"
              HREF="..&#47;estilo.css" &#47;&#62;
            &#60;&#47;head&#62;
            &#60;body&#62;
              &#60;&#63;php
              &#47;&#47; se rellena la consulta que borra el alumno se substituye alumno por el nombre de la tabla 
              $sql="DELETE from `matriculas` WHERE `id_mat` =".$_GET['id']." LIMIT 1 ;";
              &#47;&#47;echo $sql;
              &#47;&#47; se ejecuta la consulta se borrado
              $result=mysql_query($sql,$conexion);
              &#47;&#47; se informa de que se ha eliminado un alumno
              echo "&#60;p&#62;Matr&iacute;cula eliminada&#60;&#47;p&#62;";
              &#47;&#47; se coloca el enlace que permite volver al listado
              echo "&#60;p&#62;&#60;A HREF='ver_matriculas.php&#63;id=".$_GET['id_alum']."'&#62;Volver&#60;&#47;A&#62;&#60;&#47;p&#62;";

              &#63;&#62;
            &#60;&#47;body&#62;
          &#60;&#47;html&#62;
        </programlisting>
      </informalexample>
    </section>
    <section>
      <title>Conclusiones</title>
      <para>Mediante estos ultimos ficheros se ha podido ver
      c&oacute;mo relacionar entidades de una manera sencilla,
      t&oacute;melos como ejemplo y haga su primer propia
      aplicaci&oacute;n web ;) despu&eacute;s mejor la
      estructura XD</para>
    </section>
  </chapter>
 
