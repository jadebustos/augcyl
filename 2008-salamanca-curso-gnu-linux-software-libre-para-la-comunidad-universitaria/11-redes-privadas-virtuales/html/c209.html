<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Autoconfiguraci칩n: DHCP, PXE, Zeroconf</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="GNU/Linux, software libre para la comunidad universitaria"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Capa de aplicaci칩n (Layer5; Layer7 en OSI)"
HREF="x184.html"><LINK
REL="NEXT"
TITLE="DHCP vs ZeroConf y UPnP"
HREF="x232.html"></HEAD
><BODY
CLASS="chapter"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>GNU/Linux, software libre para la comunidad universitaria: Redes privadas virtuales en GNU/Linux</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x184.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x232.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="chapter"
><H1
><A
NAME="AEN209"
></A
>Cap狎ulo 3. Autoconfiguraci칩n: DHCP, PXE, Zeroconf</H1
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="AEN211"
>3.1. Servidores DHCP</A
></H1
><P
>Un servidor DHCP sirve para que los equipos presentes en una red obtengan su configuraci칩n de red autom치ticamente. As칤, el servidor asigna a cada equipo su IP y lo comunica su m치scara de red, las rutas, el DNS, servidor de impresi칩n, servidor de hora, zona horaria etc. Opcionalmente permite hacer un arranque v칤a red. Adem치s es posible definir nuevos par치metro de configuraci칩n si se extienden tambi칠n los clientes DHCP para que reconozcan y apliquen estos par치metros. </P
><P
>DHCP es un protocolo surgido con posterioridad a BOOTP; en realidad es una extensi칩n compatible con 칠l, es decir, un cliente BOOTP tambi칠n puede operar con servidores DHCP.</P
><P
>El servidor DHCP permite al administrador asignar una IP manualmente a un cliente (manual allocation); permite asignarlas autom치ticamente sin que caduque nunca la asignaci칩n (automatic allocation) o permite asignarlas autom치ticamente por un tiempo limitado (dynamic allocation), de tal modo que si el cliente no vuelve a pedirlas antes que finalice ese tiempo se marcar치 la IP como libre.</P
><P
>El servidor DHCPD guarda en una tabla las asociaciones entre clientes e IPs. El servidor identifica al cliente a trav칠s de su identificador de cliente, si es que lo proporciona, en otro caso usa su direcci칩n MAC.</P
><P
>En un segmento Ethernet puede haber m치s de un servidor DHCPD; el cliente env칤a usando broadcast un mensaje DHCPDISCOVER (puede indicar en 칠l la IP que le gustar칤a tener y durante cu치nto tiempo) al que responden con un mensaje DHCPOFFER los servidores presentes; en ese mensaje ya va la IP que le ofrecen y los datos de configuraci칩n. El cliente escoge el servidor que quiere utilizar enviando una petici칩n DHCPREQUEST que incluye el identificador del servidor; esta petici칩n tambi칠n es broadcast, para que sepan el resto de servidores que su ofrecimiento se ha rechazado. En la petici칩n adem치s se pueden solicitar datos de configuraci칩n adicionales. Si el servidor acepta la petici칩n del cliente responde con DHCPPACK (d칩nde ir치 configuraci칩n adicional si la solicit칩 el cliente), o DHCPNAK si la rechaza, debido por ejemplo a que la IP ya est치 asignada; a priori no tiene mucho sentido que un servidor rechace la petici칩n del cliente cuando son los datos que le acaba de ofrecer, pero en realidad un cliente puede hacer una petici칩n DHCPREQUEST sin acabar de recibir un DHCPOFFER; por ejemplo una vez que ya se tiene una IP para renovar el "alquiler" se pide directamente la IP al servidor DHCPD que nos la dio sin necesidad de hacer DHCPDISCOVER.</P
><P
>Finalmente, el cliente tiene la opci칩n de rechazar el mensaje DHCPPACK. As칤 mismo el cliente tambi칠n tiene la opci칩n de liberar la IP que se le ha asignado, con DHCPRELEASE.</P
><P
>En las peticiones DHCP es muy importante el uso del broadcast. Para permitir que funcione el DHCP sin necesidad de poner un servidor en cada subred se usan BOOTP/DHCP relay agents, que se encargan de reencaminar estas peticiones. </P
><P
>Para casos como una VPN, en la que el nodo que se conecta lo queremos asignar una IP de la red local, posiblemente no nos funcione usar un cliente dhcp normal, ni siquiera acompa침ado de un relay. Una posible soluci칩n es ejecutar un cliente dhcp con la interfaz de la red en la que est치 el servidor DHCP (no pasa nada porque ya haya otro si se usan identificadores de cliente distintos y distinto fichero para guardar la ip asignada (lease), pero con un script que en lugar de configurar esa interfaz con la IP asignada se encarga de configurar la VPN para que use esa IP.</P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN221"
>3.1.1. Software DHCP</A
></H2
><P
></P
><OL
TYPE="1"
><LI
><P
>Clientes: dhcpcd, dhcp-client (dhcp3-client), pump, udhcp (cliente muy peque침o)</P
></LI
><LI
><P
>Servidores: dhcp3-server, udhcp-server (servidor muy ligero)</P
></LI
><LI
><P
>Relays: dhcp3-relay, dhcp-helper. Es m치s ligero y m치s f치cil de utilizar dhcp-helper.</P
></LI
><LI
><P
>Otros: dnsmasq: servidor cach칠 DNS y servidor DHCP, los nodos a침adidos aparecen en el DNS; ltsp-server: sistema de clientes ligeros, usan DHCP para obtener la configuraci칩n y arrancar v칤a red.</P
></LI
></OL
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x184.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x232.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Capa de aplicaci칩n (Layer5; Layer7 en OSI)</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>DHCP vs ZeroConf y UPnP</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>